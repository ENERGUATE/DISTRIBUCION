HA$PBExportHeader$w_consulta_incidencia.srw
forward
global type w_consulta_incidencia from window
end type
type p_1 from picture within w_consulta_incidencia
end type
type cb_seguimiento_bri from commandbutton within w_consulta_incidencia
end type
type cb_gestion_improcedente from commandbutton within w_consulta_incidencia
end type
type sle_f_deteccion from singlelineedit within w_consulta_incidencia
end type
type gb_10 from groupbox within w_consulta_incidencia
end type
type gb_8 from groupbox within w_consulta_incidencia
end type
type st_alarmas_3 from statictext within w_consulta_incidencia
end type
type p_alarmas_3 from picture within w_consulta_incidencia
end type
type st_alarmas_2 from statictext within w_consulta_incidencia
end type
type p_alarmas_2 from picture within w_consulta_incidencia
end type
type dw_avisos_varios from datawindow within w_consulta_incidencia
end type
type st_alarmas from statictext within w_consulta_incidencia
end type
type p_alarmas from picture within w_consulta_incidencia
end type
type gb_6 from groupbox within w_consulta_incidencia
end type
type sle_nis_avi from singlelineedit within w_consulta_incidencia
end type
type dw_nom_inc from datawindow within w_consulta_incidencia
end type
type st_28 from statictext within w_consulta_incidencia
end type
type mle_obs_descargos from multilineedit within w_consulta_incidencia
end type
type sle_telef_cli from singlelineedit within w_consulta_incidencia
end type
type mle_referencia from multilineedit within w_consulta_incidencia
end type
type st_27 from statictext within w_consulta_incidencia
end type
type dw_hist_descargos from datawindow within w_consulta_incidencia
end type
type dw_inf_hist_inc from datawindow within w_consulta_incidencia
end type
type st_19 from statictext within w_consulta_incidencia
end type
type dw_informacion_hist_aviso from datawindow within w_consulta_incidencia
end type
type st_17 from statictext within w_consulta_incidencia
end type
type dw_mesa from datawindow within w_consulta_incidencia
end type
type dw_centro from datawindow within w_consulta_incidencia
end type
type st_13 from statictext within w_consulta_incidencia
end type
type st_12 from statictext within w_consulta_incidencia
end type
type st_9 from statictext within w_consulta_incidencia
end type
type dw_informacion_aviso from datawindow within w_consulta_incidencia
end type
type st_26 from statictext within w_consulta_incidencia
end type
type st_5 from statictext within w_consulta_incidencia
end type
type sle_nro_incidencia from singlelineedit within w_consulta_incidencia
end type
type mle_observaciones_cor from multilineedit within w_consulta_incidencia
end type
type mle_observaciones_tel from multilineedit within w_consulta_incidencia
end type
type st_25 from statictext within w_consulta_incidencia
end type
type sle_duracion_avi from singlelineedit within w_consulta_incidencia
end type
type st_24 from statictext within w_consulta_incidencia
end type
type sle_coordenadas_y from singlelineedit within w_consulta_incidencia
end type
type sle_coordenadas_x from singlelineedit within w_consulta_incidencia
end type
type sle_resuelto_avi from singlelineedit within w_consulta_incidencia
end type
type sle_deteccion_avi from singlelineedit within w_consulta_incidencia
end type
type sle_ingresado_avi from singlelineedit within w_consulta_incidencia
end type
type st_23 from statictext within w_consulta_incidencia
end type
type sle_previas_avi from singlelineedit within w_consulta_incidencia
end type
type sle_improc_avi from singlelineedit within w_consulta_incidencia
end type
type sle_nro_aviso_avi from singlelineedit within w_consulta_incidencia
end type
type sle_prioridad_avi from singlelineedit within w_consulta_incidencia
end type
type sle_tipo_avi from singlelineedit within w_consulta_incidencia
end type
type sle_alcance_avi from singlelineedit within w_consulta_incidencia
end type
type st_22 from statictext within w_consulta_incidencia
end type
type st_21 from statictext within w_consulta_incidencia
end type
type sle_estado_avi from singlelineedit within w_consulta_incidencia
end type
type dw_aviso_asociados from datawindow within w_consulta_incidencia
end type
type cb_avi_aso from commandbutton within w_consulta_incidencia
end type
type rb_nro_aviso from radiobutton within w_consulta_incidencia
end type
type rb_nis from radiobutton within w_consulta_incidencia
end type
type sle_tiempo_int from singlelineedit within w_consulta_incidencia
end type
type st_14 from statictext within w_consulta_incidencia
end type
type em_final_solicitado from editmask within w_consulta_incidencia
end type
type em_inicio_solicitado from editmask within w_consulta_incidencia
end type
type mle_insta_afec from multilineedit within w_consulta_incidencia
end type
type mle_area_afec from multilineedit within w_consulta_incidencia
end type
type st_16 from statictext within w_consulta_incidencia
end type
type st_15 from statictext within w_consulta_incidencia
end type
type sle_agente from singlelineedit within w_consulta_incidencia
end type
type sle_tension_afectada from singlelineedit within w_consulta_incidencia
end type
type sle_tension_origen from singlelineedit within w_consulta_incidencia
end type
type mle_observacion from multilineedit within w_consulta_incidencia
end type
type st_11 from statictext within w_consulta_incidencia
end type
type sle_tipo_incidencia from singlelineedit within w_consulta_incidencia
end type
type st_10 from statictext within w_consulta_incidencia
end type
type st_8 from statictext within w_consulta_incidencia
end type
type st_6 from statictext within w_consulta_incidencia
end type
type st_4 from statictext within w_consulta_incidencia
end type
type st_3 from statictext within w_consulta_incidencia
end type
type sle_estado_incidencia from singlelineedit within w_consulta_incidencia
end type
type sle_efa from singlelineedit within w_consulta_incidencia
end type
type sle_eop from singlelineedit within w_consulta_incidencia
end type
type sle_sub_causa from singlelineedit within w_consulta_incidencia
end type
type sle_causa from singlelineedit within w_consulta_incidencia
end type
type sle_ot from singlelineedit within w_consulta_incidencia
end type
type mle_descripcion_incidencia from multilineedit within w_consulta_incidencia
end type
type sle_tension from singlelineedit within w_consulta_incidencia
end type
type st_2 from statictext within w_consulta_incidencia
end type
type sle_nombre_incidencia from singlelineedit within w_consulta_incidencia
end type
type sle_documento from singlelineedit within w_consulta_incidencia
end type
type st_1 from statictext within w_consulta_incidencia
end type
type sle_zona from singlelineedit within w_consulta_incidencia
end type
type sle_local from singlelineedit within w_consulta_incidencia
end type
type sle_muni from singlelineedit within w_consulta_incidencia
end type
type sle_depto from singlelineedit within w_consulta_incidencia
end type
type st_7 from statictext within w_consulta_incidencia
end type
type mle_direccion from multilineedit within w_consulta_incidencia
end type
type st_3x from statictext within w_consulta_incidencia
end type
type st_cliente from statictext within w_consulta_incidencia
end type
type sle_cliente from singlelineedit within w_consulta_incidencia
end type
type cb_consultar from commandbutton within w_consulta_incidencia
end type
type sle_nis from editmask within w_consulta_incidencia
end type
type em_fecha_deteccion from editmask within w_consulta_incidencia
end type
type sle_accion_causante from singlelineedit within w_consulta_incidencia
end type
type gb_2 from groupbox within w_consulta_incidencia
end type
type dw_consulta_incidencia from datawindow within w_consulta_incidencia
end type
type gb_3 from groupbox within w_consulta_incidencia
end type
type dw_inf_causa from datawindow within w_consulta_incidencia
end type
type dw_inf_sub_causa from datawindow within w_consulta_incidencia
end type
type dw_inf_elem_fallado from datawindow within w_consulta_incidencia
end type
type dw_inf_elem_operado from datawindow within w_consulta_incidencia
end type
type dw_tension from datawindow within w_consulta_incidencia
end type
type dw_informacion_nis from datawindow within w_consulta_incidencia
end type
type gb_5 from groupbox within w_consulta_incidencia
end type
type dw_descargos from datawindow within w_consulta_incidencia
end type
type gb_avisos_asociados from groupbox within w_consulta_incidencia
end type
type gb_aso_inc from groupbox within w_consulta_incidencia
end type
type gb_4 from groupbox within w_consulta_incidencia
end type
type gb_1 from groupbox within w_consulta_incidencia
end type
type st_18 from statictext within w_consulta_incidencia
end type
type sle_zona_avi from singlelineedit within w_consulta_incidencia
end type
type st_20 from statictext within w_consulta_incidencia
end type
type sle_sector_avi from singlelineedit within w_consulta_incidencia
end type
type gb_7 from groupbox within w_consulta_incidencia
end type
type gb_9 from groupbox within w_consulta_incidencia
end type
type gb_11 from groupbox within w_consulta_incidencia
end type
end forward

global type w_consulta_incidencia from window
integer x = 1490
integer y = 556
integer width = 7072
integer height = 2912
boolean titlebar = true
string title = "Consulta de Incidencia (w_consulta_incidencia)"
boolean controlmenu = true
windowstate windowstate = maximized!
long backcolor = 67108864
p_1 p_1
cb_seguimiento_bri cb_seguimiento_bri
cb_gestion_improcedente cb_gestion_improcedente
sle_f_deteccion sle_f_deteccion
gb_10 gb_10
gb_8 gb_8
st_alarmas_3 st_alarmas_3
p_alarmas_3 p_alarmas_3
st_alarmas_2 st_alarmas_2
p_alarmas_2 p_alarmas_2
dw_avisos_varios dw_avisos_varios
st_alarmas st_alarmas
p_alarmas p_alarmas
gb_6 gb_6
sle_nis_avi sle_nis_avi
dw_nom_inc dw_nom_inc
st_28 st_28
mle_obs_descargos mle_obs_descargos
sle_telef_cli sle_telef_cli
mle_referencia mle_referencia
st_27 st_27
dw_hist_descargos dw_hist_descargos
dw_inf_hist_inc dw_inf_hist_inc
st_19 st_19
dw_informacion_hist_aviso dw_informacion_hist_aviso
st_17 st_17
dw_mesa dw_mesa
dw_centro dw_centro
st_13 st_13
st_12 st_12
st_9 st_9
dw_informacion_aviso dw_informacion_aviso
st_26 st_26
st_5 st_5
sle_nro_incidencia sle_nro_incidencia
mle_observaciones_cor mle_observaciones_cor
mle_observaciones_tel mle_observaciones_tel
st_25 st_25
sle_duracion_avi sle_duracion_avi
st_24 st_24
sle_coordenadas_y sle_coordenadas_y
sle_coordenadas_x sle_coordenadas_x
sle_resuelto_avi sle_resuelto_avi
sle_deteccion_avi sle_deteccion_avi
sle_ingresado_avi sle_ingresado_avi
st_23 st_23
sle_previas_avi sle_previas_avi
sle_improc_avi sle_improc_avi
sle_nro_aviso_avi sle_nro_aviso_avi
sle_prioridad_avi sle_prioridad_avi
sle_tipo_avi sle_tipo_avi
sle_alcance_avi sle_alcance_avi
st_22 st_22
st_21 st_21
sle_estado_avi sle_estado_avi
dw_aviso_asociados dw_aviso_asociados
cb_avi_aso cb_avi_aso
rb_nro_aviso rb_nro_aviso
rb_nis rb_nis
sle_tiempo_int sle_tiempo_int
st_14 st_14
em_final_solicitado em_final_solicitado
em_inicio_solicitado em_inicio_solicitado
mle_insta_afec mle_insta_afec
mle_area_afec mle_area_afec
st_16 st_16
st_15 st_15
sle_agente sle_agente
sle_tension_afectada sle_tension_afectada
sle_tension_origen sle_tension_origen
mle_observacion mle_observacion
st_11 st_11
sle_tipo_incidencia sle_tipo_incidencia
st_10 st_10
st_8 st_8
st_6 st_6
st_4 st_4
st_3 st_3
sle_estado_incidencia sle_estado_incidencia
sle_efa sle_efa
sle_eop sle_eop
sle_sub_causa sle_sub_causa
sle_causa sle_causa
sle_ot sle_ot
mle_descripcion_incidencia mle_descripcion_incidencia
sle_tension sle_tension
st_2 st_2
sle_nombre_incidencia sle_nombre_incidencia
sle_documento sle_documento
st_1 st_1
sle_zona sle_zona
sle_local sle_local
sle_muni sle_muni
sle_depto sle_depto
st_7 st_7
mle_direccion mle_direccion
st_3x st_3x
st_cliente st_cliente
sle_cliente sle_cliente
cb_consultar cb_consultar
sle_nis sle_nis
em_fecha_deteccion em_fecha_deteccion
sle_accion_causante sle_accion_causante
gb_2 gb_2
dw_consulta_incidencia dw_consulta_incidencia
gb_3 gb_3
dw_inf_causa dw_inf_causa
dw_inf_sub_causa dw_inf_sub_causa
dw_inf_elem_fallado dw_inf_elem_fallado
dw_inf_elem_operado dw_inf_elem_operado
dw_tension dw_tension
dw_informacion_nis dw_informacion_nis
gb_5 gb_5
dw_descargos dw_descargos
gb_avisos_asociados gb_avisos_asociados
gb_aso_inc gb_aso_inc
gb_4 gb_4
gb_1 gb_1
st_18 st_18
sle_zona_avi sle_zona_avi
st_20 st_20
sle_sector_avi sle_sector_avi
gb_7 gb_7
gb_9 gb_9
gb_11 gb_11
end type
global w_consulta_incidencia w_consulta_incidencia

type variables
long l_nro_aviso, l_nro_incidencia, l_nro_descargo, l_nis_rad, l_nif,l_cod_cli, l_cod_est_avi, l_nro_brigada, l_nro_ot, l_instalacion
integer l_tabla_avi, l_tabla_inc, l_tabla_des, hora
string l_fecha_conver, l_nombre_brigada
datetime l_fecha
boolean l_search_aviso, l_search_nis
st_params st_parametros

integer gi_ind_cli_esen, gi_ind_cli_imp

string gs_tip_carga, gs_img_carga
end variables

forward prototypes
public function string f_formato_fechas (datetime l_fechas)
public function integer f_limpiar_variables ()
public subroutine f_query_incidencia (double l_nro_incidencia_param)
public subroutine f_query_descargo (double l_nro_descargo_param)
public subroutine f_retrieve_aviso (double l_nro_aviso_param)
public subroutine f_retrieve_nis (double l_nis_rad_param)
public function long f_query_aviso (double l_nro_aviso_param)
public function double f_query_hist_aviso (double l_nro_aviso_param)
public function double f_query_hist_incidencia (double l_nro_incidencia_param)
public function double f_query_hist_descargo (double l_nro_descargo_param)
public function integer f_query_nis (double l_nis_rad_param)
public subroutine f_limpiar_controles ()
public function double f_avisos_alarmas (double l_nro_avi_param)
public function integer f_query_avisos_varios (long l_param_nro_aviso)
public function integer fw_a_importante (double pl_nis)
end prototypes

public function string f_formato_fechas (datetime l_fechas);////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Funcion: f_formato_fechas
//Creado: 28/02/2018
//Descripci$$HEX1$$f300$$ENDHEX$$n: convierte las fechas en string
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


l_fecha_conver = String(l_fechas, "dd mmm yyyy hh:mm")


return l_fecha_conver
end function

public function integer f_limpiar_variables ();
SetNull(l_nro_aviso)
SetNull(l_nro_incidencia)
SetNull(l_nro_descargo)
SetNull(l_nis_rad) 
SetNull(l_nif)
SetNull(l_cod_cli)
SetNull(l_cod_est_avi)
SetNull(l_nro_brigada) 
SetNull(l_nro_ot)
SetNull(l_tabla_avi)
SetNull(l_tabla_inc) 
SetNull(l_tabla_des) 
SetNull(hora)
SetNull(l_nombre_brigada)
SetNull(l_fecha_conver)
SetNull(l_fecha)

return 0
end function

public subroutine f_query_incidencia (double l_nro_incidencia_param);l_nro_incidencia = l_nro_incidencia_param

if l_nro_incidencia = 0 then 
	return 
end if

dw_consulta_incidencia.SetTransObject(SQLCA)
dw_consulta_incidencia.retrieve(l_nro_incidencia)
	
IF dw_consulta_incidencia.rowcount() <> 0 THEN	

	//INFORMACION DE INCIDENCIA
	sle_nro_incidencia.text = String(l_nro_incidencia)
	if not IsNull(dw_consulta_incidencia.Object.instalacion_origen[1]) then
		l_instalacion =  dw_consulta_incidencia.Object.instalacion_origen[1]
	elseif not isNull(dw_consulta_incidencia.Object.nro_inst_afectada[1]) then
		l_instalacion = dw_consulta_incidencia.Object.nro_inst_afectada[1]
	end if 
	dw_nom_inc.SetTransObject(SQLCA)
	dw_nom_inc.retrieve(l_instalacion)
	IF dw_nom_inc.rowcount() <> 0 THEN	
		sle_nombre_incidencia.text = dw_nom_inc.Object.nombre[1]
	end if
	sle_tension.text = dw_consulta_incidencia.Object.tension[1]
	sle_accion_causante.text = dw_consulta_incidencia.Object.accion_causante[1]
	
	l_fecha = dw_consulta_incidencia.Object.fecha_deteccion[1]
	
	em_fecha_deteccion.text= f_formato_fechas(l_fecha)
	
	mle_descripcion_incidencia.text =  dw_consulta_incidencia.Object.descripcion[1]
	sle_estado_incidencia.text = dw_consulta_incidencia.Object.estado_actual[1]
	sle_tipo_incidencia.text = string( dw_consulta_incidencia.Object.tipo_incidencia_a[1]  + "  -|-  "  + dw_consulta_incidencia.Object.tipo_incidencia[1])
	mle_observacion.text = dw_consulta_incidencia.Object.observacion[1]

	IF NOT IsNull(dw_consulta_incidencia.Object.brigada[1]) THEN
		sle_ot.text = string(dw_consulta_incidencia.Object.brigada[1])
	END IF

	sle_tension_origen.text = dw_consulta_incidencia.Object.sgd_valor_tension_origen[1]
	sle_tension_afectada.text = dw_consulta_incidencia.Object.sgd_valor_tension_afectada[1]
	sle_agente.text = dw_consulta_incidencia.Object.sgd_valor_agente[1]
	mle_area_afec.text = dw_consulta_incidencia.Object.sgd_incidencia_area_afectada[1]

	//INFORMACI$$HEX1$$d300$$ENDHEX$$N DE CAUSA DE LA INCIDENCIA
	IF NOT IsNull(dw_consulta_incidencia.Object.causa[1]) THEN
		dw_inf_causa.SetTransObject(SQLCA)
		dw_inf_causa.retrieve(dw_consulta_incidencia.Object.causa[1],l_nro_incidencia)			
		sle_causa.text = dw_inf_causa.Object.descripcion[1]			
	END IF

	//INFORMACI$$HEX1$$d300$$ENDHEX$$N DE SUB-CAUSA DE LA INCIDENCIA
	IF NOT IsNull(dw_consulta_incidencia.Object.sub_causa[1]) THEN
		dw_inf_sub_causa.SetTransObject(SQLCA)
		dw_inf_sub_causa.retrieve(dw_consulta_incidencia.Object.sub_causa[1],l_nro_incidencia)
		sle_sub_causa.text = dw_inf_sub_causa.Object.descripcion[1]
	END IF

	//INFORMACI$$HEX1$$d300$$ENDHEX$$N DE ELEMENTO OPERADO
	IF NOT IsNull(dw_consulta_incidencia.Object.cod_elem_operado[1]) THEN
		dw_inf_elem_operado.SetTransObject(SQLCA)
		dw_inf_elem_operado.retrieve(dw_consulta_incidencia.Object.cod_elem_operado[1])
		sle_eop.text = dw_inf_elem_operado.Object.descripcion[1]
	END IF

	//INFORMACI$$HEX1$$d300$$ENDHEX$$N DE ELEMENTO FALLADO
	IF NOT IsNull(dw_consulta_incidencia.Object.cod_elem_fallado[1]) THEN
		dw_inf_elem_fallado.SetTransObject(SQLCA)
		dw_inf_elem_fallado.retrieve(dw_consulta_incidencia.Object.cod_elem_fallado[1])
		sle_efa.text = dw_inf_elem_fallado.Object.descripcion[1]				
	END IF
END IF

if l_nro_incidencia > 0 then
	cb_avi_aso.ENABLED = true
end if
end subroutine

public subroutine f_query_descargo (double l_nro_descargo_param);l_nro_descargo = l_nro_descargo_param

if l_nro_incidencia = 0 then 
	return  
end if

//OBTENEMOS LA INFORMACION DEL DESCARGO
dw_descargos.SetTransObject(SQLCA)
dw_descargos.retrieve(l_nro_descargo)

//VALIDAMOS QUE SE OBTUVIERON REGISTROS
IF  dw_descargos.rowcount() <> 0 THEN

	//LLENAMOS LOS CONTROLES CON LA INFORMACION DEL DESCARGO
	l_fecha = dw_descargos.Object.inicio_solicitado[1]
	em_inicio_solicitado.Text = f_formato_fechas(l_fecha)
	l_fecha = dw_descargos.Object.final_solicitado[1]
	em_final_solicitado.Text = f_formato_fechas(l_fecha)
	mle_obs_descargos.text = dw_descargos.Object.sgd_descargos_observaciones[1]
	
	//OBTENEMOS LAS HORAS DE INTERRUPCION
	hora  = (dw_descargos.Object.tiempo_interrupcion_total[1]/60)
	hora = Round(hora, 2)
	
	//SE LA HORA ES MAYOR A 1 PONEMOS EN PLURAL "HORAS"
	IF hora > 1 THEN
		
		sle_tiempo_int.Text = String(hora) + " Horas"
	ELSEIF hora <= 1 THEN
		
		sle_tiempo_int.Text = String(hora) + " Hora"
	END IF
	mle_insta_afec.Text = dw_descargos.Object.instalacion_afectadas[1]
END IF
end subroutine

public subroutine f_retrieve_aviso (double l_nro_aviso_param);l_nro_aviso = l_nro_aviso_param



//BUSCAMOS CON EL NRO AVISO EN LAS TABLAS DE AVISO  Y HISTORICO DE AVISO
SELECT G_AVISOS.NIS_RAD, G_AVISOS.TABLA
INTO :l_nis_rad, :l_tabla_avi
FROM (SELECT NIS_RAD, 1 as "TABLA"
		   FROM GI_AVISOS
      	   WHERE NRO_AVISO = :l_nro_aviso
      	   UNION
      	   SELECT NIS_RAD, 2 as "TABLA"
		   FROM GI_HIST_AVISOS
      	   WHERE NRO_AVISO = :l_nro_aviso
) G_AVISOS
USING SQLCA;

//IF SQLCA2.sqlcode = 100 THEN
//	MessageBox("Aviso", "El NIS " + String(l_nis_rad) + " no posee un aviso asociado.")	
//END IF

IF SQLCA.sqlcode <> 0 and SQLCA.sqlcode <> 100 THEN
	MessageBox("Error", SQLCA.sqlerrtext)	
END IF

if l_nis_rad = 0 then	
	f_query_avisos_varios(l_nro_aviso)
//	return 0
else 
	f_query_nis(l_nis_rad)
end if

//Buscamos la informacion del suministro asociado al aviso


//VALIDAMOS DE QUE TABLA SE OBTUVO LA INFORMACION DEL AVISO  DE  GI_AVISOS  (1) O GI_HIST_AVISOS  (2)
IF l_tabla_avi = 1 then	
	//BUSCAMOS LA INFORMACI$$HEX1$$d300$$ENDHEX$$N DEL AVISO 
	l_nro_incidencia =  	f_query_aviso(l_nro_aviso)
	f_avisos_alarmas(l_nro_aviso)
ELSEIF l_tabla_avi = 2 then
	l_nro_incidencia =  f_query_hist_aviso(l_nro_aviso)
	f_avisos_alarmas(l_nro_aviso)
END IF

//BUSCAMOS CON EL NRO AVISO EN LAS TABLAS DE INCIDENCIA Y HISTORICO DE  INCIDENCIA
SELECT G_INCIDENCIAS.NRO_INCIDENCIA, G_INCIDENCIAS.TABLA
INTO :l_nro_incidencia, :l_tabla_inc
FROM (SELECT NRO_INCIDENCIA, 1 as "TABLA"
		   FROM SGD_INCIDENCIA 
       WHERE NRO_INCIDENCIA =  :l_nro_incidencia
       UNION
       SELECT NRO_INCIDENCIA, 2 as "TABLA"
		   FROM GI_HIST_INCIDENCIAS 
       WHERE NRO_INCIDENCIA =  :l_nro_incidencia
) G_INCIDENCIAS
USING SQLCA;

//IF SQLCA2.sqlcode = 100 THEN
//	MessageBox("Incidencia", "El NIS " + String(l_nis_rad) + " tiene un aviso ingresado el cual no tiene una incidencia asociada")	
//END IF

IF SQLCA.sqlcode <> 0 and SQLCA.sqlcode <> 100 THEN
	MessageBox("Error", SQLCA.sqlerrtext)	
END IF

//VALIDAMOS DE QUE TABLA SE OBTUVO LA INFORMACION DEL AVISO  DE  SGD_INCIDENCIA  (1) O GI_HIST_INCIDENCIAS (2)
IF l_tabla_inc = 1 then	

	//OBTENEMOS INFORMACION DE LA INCIDENCIA
	gb_aso_inc.Text = gb_aso_inc.Text + String(l_nro_incidencia)
	 f_query_incidencia(l_nro_incidencia)	
ELSEIF  l_tabla_inc = 2 then
	
	gb_aso_inc.Text = gb_aso_inc.Text + String(l_nro_incidencia)
	f_query_hist_incidencia(l_nro_incidencia)	
END IF

//BUSCAMOS CON EL NRO AVISO EN LAS TABLAS DE DESCARGO Y HISTORICO DE  DESCARGO
SELECT NRO_DESCARGO, TABLA
INTO :l_nro_descargo,:l_tabla_des
FROM (
      SELECT C.NRO_DESCARGO, 1 as "TABLA"
      FROM GI_AVISOS A,
        SGD_INCIDENCIA B,
        SGD_DESCARGOS C
      WHERE A.NRO_INCIDENCIA = B.NRO_INCIDENCIA
      AND B.NRO_INCIDENCIA = C.NRO_INCIDENCIA
      AND a.NRO_AVISO = :l_nro_aviso
      UNION
      SELECT C.NRO_DESCARGO, 2 as "TABLA"
      FROM GI_HIST_AVISOS A,
        GI_HIST_INCIDENCIAS B,
        GI_HIST_DESCARGOS C
      WHERE A.NRO_INCIDENCIA = B.NRO_INCIDENCIA
      AND B.NRO_INCIDENCIA = C.NRO_INCIDENCIA
      AND a.NRO_AVISO = :l_nro_aviso
) G_DESCARGOS
USING SQLCA;

//IF SQLCA2.sqlcode = 100 THEN
//	MessageBox("Descargo", "El NIS " + String(l_nis_rad) + " no posee un Descargo asociado")	
//END IF

IF SQLCA.sqlcode <> 0 and SQLCA.sqlcode <> 100 THEN
	MessageBox("Error", SQLCA.sqlerrtext)	
END IF

//VALIDAMOS DE QUE TABLA SE OBTUVO LA INFORMACION DEL AVISO  DE  SGD_DESCARGO  (1) O GI_HIST_DESCARGOS (2)
IF l_tabla_des = 1 THEN	
	//OBTENEMOS DATOS DEL DESCARGO ASOCIADO AL AVISO
	f_query_descargo(l_nro_descargo)
ELSEIF l_tabla_des = 2 THEN	
	//OBTENEMOS DATOS DEL DESCARGO ASOCIADO AL AVISO EN HISTORICO
	f_query_hist_descargo(l_nro_descargo)
END IF
end subroutine

public subroutine f_retrieve_nis (double l_nis_rad_param);////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Funcion: f_retrieve
//Creado: 20/02/2018
//Descripci$$HEX1$$f300$$ENDHEX$$n: Se encarga de obtener todos los datos realacionados al NIS, INCIDENCIA y DESCARGO,
//mediante el numero nis usado.
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

l_nis_rad = l_nis_rad_param

//BUSCAMOS EL NUMERO MAXIMO DEL AVISO ASOCIADO AL NIS EN AVISOS Y HISTORICOS DE AVISO
SELECT MAX(G_AVISOS.NRO_AVISO) AS NRO_AVISO, G_AVISOS.TABLA
INTO  :l_nro_aviso, :l_tabla_avi
FROM (
	       	SELECT MAX(NRO_AVISO) AS NRO_AVISO, 1 AS "TABLA"
	        FROM GI_AVISOS
    	    WHERE NIS_RAD = :l_nis_rad
	        UNION ALL
   	      SELECT MAX(NRO_AVISO), 2 AS "TABLA"
          FROM GI_HIST_AVISOS
          WHERE NIS_RAD = :l_nis_rad
) G_AVISOS
WHERE G_AVISOS.NRO_AVISO is not null
AND ROWNUM = 1
GROUP BY G_AVISOS.TABLA, G_AVISOS.NRO_AVISO
ORDER BY G_AVISOS.NRO_AVISO DESC
USING SQLCA;

//IF SQLCA2.sqlcode = 100 THEN
//	MessageBox("Aviso", "El NIS " + String(l_nis_rad) + " no posee un aviso asociado.")	
//END IF

IF SQLCA.sqlcode <> 0 and SQLCA.sqlcode <> 100 THEN
	MessageBox("Error", SQLCA.sqlerrtext)	
END IF

f_query_nis(l_nis_rad)

if l_tabla_avi = 1 THEN
	l_nro_incidencia = f_query_aviso(l_nro_aviso)
	f_avisos_alarmas(l_nro_aviso)
ELSEIF l_tabla_avi  = 2 THEN
	l_nro_incidencia =  f_query_hist_aviso(l_nro_aviso)
	f_avisos_alarmas(l_nro_aviso)
END IF

SELECT G_INCIDENCIAS.NRO_INCIDENCIA, G_INCIDENCIAS.TABLA
INTO :l_nro_incidencia, :l_tabla_inc
FROM (SELECT NRO_INCIDENCIA, 1 as "TABLA"
		   FROM SGD_INCIDENCIA 
       WHERE NRO_INCIDENCIA =  :l_nro_incidencia
       UNION
       SELECT NRO_INCIDENCIA, 2 as "TABLA"
		   FROM GI_HIST_INCIDENCIAS 
       WHERE NRO_INCIDENCIA =  :l_nro_incidencia
) G_INCIDENCIAS
USING SQLCA;

//IF SQLCA2.sqlcode = 100 THEN
//	MessageBox("Incidencia", "El NIS " + String(l_nis_rad) + " tiene un aviso ingresado el cual no tiene una incidencia asociada")	
//END IF

IF SQLCA.sqlcode <> 0 and SQLCA.sqlcode <> 100 THEN
	MessageBox("Error", SQLCA.sqlerrtext)	
END IF

if l_tabla_inc = 1 then
		gb_aso_inc.Text = gb_aso_inc.Text + String(l_nro_incidencia)
		f_query_incidencia(l_nro_incidencia)
ELSEIF l_tabla_inc = 2 then
		gb_aso_inc.Text = gb_aso_inc.Text + String(l_nro_incidencia)
		f_query_hist_incidencia(l_nro_incidencia)
END IF

//BUSCAMOS CON EL NRO AVISO EN LAS TABLAS DE DESCARGO Y HISTORICO DE  DESCARGO
SELECT NRO_DESCARGO, TABLA
INTO :l_nro_descargo,:l_tabla_des
FROM (
      SELECT C.NRO_DESCARGO, 1 as "TABLA"
      FROM GI_AVISOS A,
        SGD_INCIDENCIA B,
        SGD_DESCARGOS C
      WHERE A.NRO_INCIDENCIA = B.NRO_INCIDENCIA
      AND B.NRO_INCIDENCIA = C.NRO_INCIDENCIA
      AND a.NRO_AVISO = :l_nro_aviso
      UNION
      SELECT C.NRO_DESCARGO, 2 as "TABLA"
      FROM GI_HIST_AVISOS A,
        GI_HIST_INCIDENCIAS B,
        GI_HIST_DESCARGOS C
      WHERE A.NRO_INCIDENCIA = B.NRO_INCIDENCIA
      AND B.NRO_INCIDENCIA = C.NRO_INCIDENCIA
      AND a.NRO_AVISO = :l_nro_aviso
) G_DESCARGOS
USING SQLCA;

//IF SQLCA2.sqlcode = 100 THEN
//	MessageBox("Descargo", "El NIS " + String(l_nis_rad) + " no posee un Descargo asociado")	
//END IF

IF SQLCA.sqlcode <> 0 and SQLCA.sqlcode <> 100 THEN
	MessageBox("Error", SQLCA.sqlerrtext)	
END IF

if l_tabla_des = 1 then
	f_query_descargo(l_nro_descargo)
elseif l_tabla_des =2 then
	f_query_hist_descargo(l_nro_descargo)
end if


end subroutine

public function long f_query_aviso (double l_nro_aviso_param);int li_est_aviso = 0
l_nro_aviso = l_nro_aviso_param

//OBTENEMOS LA INFORMACI$$HEX1$$d300$$ENDHEX$$N DEL AVISO (ESTADO, FECHA DE ALTA,  ETC)
dw_informacion_aviso.SetTransObject(SQLCA)
dw_informacion_aviso.Retrieve(l_nro_aviso)

string f_problema

SELECT TO_CHAR(FECHA_PROBLEMA,'DD/MM/YYYY HH24:MI:SS')
into : f_problema
FROM GI_AVISOS WHERE NRO_AVISO = :l_nro_aviso
USING SQLCA;

if SQLCA.sqlcode = 0 then 
	sle_f_deteccion.text = f_problema
END IF

//VALIDAMOS QUE SE OBTUVIERON REGISTROS.
IF dw_informacion_aviso.rowcount() <> 0 THEN
	
	//OBTENEMOS LA ZONA Y REGION DEL AVISO
	dw_centro.SetTransObject(SQLCA)
	dw_mesa.SetTransObject(SQLCA)
	dw_centro.Retrieve(dw_informacion_aviso.Object.gi_avisos_nro_centro[1])
	dw_mesa.Retrieve(dw_informacion_aviso.Object.gi_avisos_nro_mesa[1],dw_informacion_aviso.Object.gi_avisos_nro_centro[1])
	
	//VALIDAMOS QUE SE OBTUVIERON REGISTROS
	IF dw_centro.rowcount() <> 0 THEN
 		sle_zona_avi.text = dw_centro.Object.nombre[1]
	END IF
	
	//VALIDAMOS QUE SE OBTUVIERON REGISTROS	
	IF dw_mesa.rowcount() <> 0 THEN
		sle_sector_avi.text = dw_mesa.Object.nombre[1]
	END IF
	
	//LLENAMOS LOS CONTROLES CON LA INFORMACION OBTENIDA
	sle_estado_avi.text = dw_informacion_aviso.Object.sgd_valor_estado_aviso[1]
	sle_tipo_avi.text = dw_informacion_aviso.Object.gi_tip_aviso[1]
	sle_alcance_avi.text = dw_informacion_aviso.Object.sgd_valor_alcance[1]
	sle_prioridad_avi.text = dw_informacion_aviso.Object.sgd_valor_prioridad[1]
	sle_nro_aviso_avi.text = STRING(l_nro_aviso)
	sle_previas_avi.text = STRING(dw_informacion_aviso.Object.gi_avisos_nro_llamadas[1])
	
	//VALIDAMOS SI ES IMPROCEDENTE
	IF dw_informacion_aviso.Object.gi_avisos_ind_improcedente[1] = 0 THEN
		sle_improc_avi.text = "NO"
	ELSEIF dw_informacion_aviso.Object.gi_avisos_ind_improcedente[1] = 1 THEN
		sle_improc_avi.text = "SI"
		//TDA/HESPINOZA - BOTON DE GESTION INI
		cb_gestion_improcedente.Visible = True
		//TDA/HESPINOZA - BOTON DE GESTION FIN
	END IF
	
	//VALIDAMOS SI NO ES AVISO RESUELTO PARA MOSTRAR EL SEGUIMIENTO BRIMOVIL - TDA/2021
	li_est_aviso = dw_informacion_aviso.Object.gi_avisos_est_aviso[1]
	
	IF li_est_aviso <> 5 THEN
		gb_11.visible = true
		p_1.visible = true
		cb_seguimiento_bri.visible = true
	END IF
	//FIN
	
	sle_ingresado_avi.text = STRING(dw_informacion_aviso.Object.gi_avisos_f_alta[1])
	//sle_deteccion_avi.text = STRING(dw_informacion_aviso.Object.gi_avisos_fecha_problema[1])
	sle_resuelto_avi.text = STRING(dw_informacion_aviso.Object.gi_avisos_fecha_res[1])
	sle_coordenadas_x.text = STRING(dw_informacion_aviso.Object.gi_avisos_coordenada_x[1])
	sle_coordenadas_y.text = STRING(dw_informacion_aviso.Object.gi_avisos_coordenada_y[1])
	sle_duracion_avi.text = dw_informacion_aviso.Object.compute_0021[1] 
	mle_observaciones_tel.text = dw_informacion_aviso.Object.gi_avisos_obs_telegestiones[1]
	mle_observaciones_cor.text = dw_informacion_aviso.Object.gi_avisos_obs_cmd[1]
	mle_referencia.text = dw_informacion_aviso.Object.gi_avisos_esquina[1]
	sle_telef_cli.text = dw_informacion_aviso.Object.gi_avisos_tfno_cli[1]	
	return dw_informacion_aviso.Object.gi_avisos_nro_incidencia[1]
	
ELSE
	//ENVIAMOS MENSAJE DE ERROR
	//MessageBox("Aviso", "No se obtuvo informaci$$HEX1$$f300$$ENDHEX$$n del  Aviso")	
	return 0
END IF
end function

public function double f_query_hist_aviso (double l_nro_aviso_param);int li_est_aviso = 0
l_nro_aviso = l_nro_aviso_param

dw_informacion_hist_aviso.SetTransObject(SQLCA)
dw_informacion_hist_aviso.Retrieve(l_nro_aviso)

string f_problema

SELECT TO_CHAR(FECHA_PROBLEMA,'DD/MM/YYYY HH24:MI:SS')
into : f_problema
FROM GI_HIST_AVISOS WHERE NRO_AVISO = :l_nro_aviso
USING SQLCA;

if SQLCA.sqlcode = 0 then 
	sle_f_deteccion.text = f_problema
END IF
	
//OBTENEMOS LA INFORMACION DE LA ZONA Y REGION DEL AVISO
dw_centro.SetTransObject(SQLCA)
dw_centro.Retrieve(dw_informacion_hist_aviso.Object.gi_hist_avisos_nro_centro[1])
dw_mesa.SetTransObject(SQLCA)
dw_mesa.Retrieve(dw_informacion_hist_aviso.Object.gi_hist_avisos_nro_mesa[1],dw_informacion_hist_aviso.Object.gi_hist_avisos_nro_centro[1])

//VALIDAMOS QUE SE OBTUVIERON REGISTROS.
IF dw_informacion_hist_aviso.rowcount() <> 0 THEN
	
	//OBTENEMOS LA INFORMACION DE LA ZONA Y REGION DEL AVISO
	dw_centro.SetTransObject(SQLCA)
	dw_centro.Retrieve(dw_informacion_hist_aviso.Object.gi_hist_avisos_nro_centro[1])
	dw_mesa.SetTransObject(SQLCA)
	dw_mesa.Retrieve(dw_informacion_hist_aviso.Object.gi_hist_avisos_nro_mesa[1],dw_informacion_hist_aviso.Object.gi_hist_avisos_nro_centro[1])
	
	//VERIFICAMOS QUE SE OBTUVIERON REGISTROS
	IF dw_centro.rowcount() <> 0 THEN
		sle_zona_avi.text = dw_centro.Object.nombre[1]
	END IF
	
	//VERIFICAMOS QUE SE OBTUVIERON REGISTROS
	IF dw_centro.rowcount() <> 0 THEN
		sle_sector_avi.text = dw_mesa.Object.nombre[1]
	END IF

	//LLENAMOS LOS CONTROLES CON LA INFORMACION DEL AVISO DE LOS HISTORICOS
	sle_estado_avi.text = dw_informacion_hist_aviso.Object.sgd_valor_estado_aviso[1]
	sle_tipo_avi.text = dw_informacion_hist_aviso.Object.gi_t_tip_aviso_descripcion[1]
	sle_alcance_avi.text = dw_informacion_hist_aviso.Object.sgd_valor_alcance[1]
	sle_prioridad_avi.text = dw_informacion_hist_aviso.Object.sgd_valor_prioridad[1]
	sle_nro_aviso_avi.text = STRING(l_nro_aviso)
	sle_previas_avi.text = STRING(dw_informacion_hist_aviso.Object.gi_hist_avisos_nro_llamadas[1])
	
	//VERIFICAMOS SI ES IMPROCEDENTE
	IF dw_informacion_hist_aviso.Object.gi_hist_avisos_ind_improcedente[1] = 0 THEN
		sle_improc_avi.text = "NO"
	ELSEIF dw_informacion_hist_aviso.Object.gi_hist_avisos_ind_improcedente[1] = 1 THEN
		sle_improc_avi.text = "SI"
	END IF	
	
	//VERIFICAMOS SI NO ESTA RESUELTO PARA MOSTRAR EL SEGUIMIENTO BRIMOVIL
	li_est_aviso = dw_informacion_hist_aviso.Object.gi_hist_avisos_est_aviso[1]
	
	IF li_est_aviso <> 5 THEN
		gb_11.visible = true
		p_1.visible = true
		cb_seguimiento_bri.visible = true
	END IF
	//FIN
	
	sle_ingresado_avi.text = STRING(dw_informacion_hist_aviso.Object.gi_hist_avisos_f_alta[1])
	//sle_deteccion_avi.text = STRING(dw_informacion_hist_aviso.Object.gi_hist_avisos_fecha_problema[1])
	sle_resuelto_avi.text = STRING(dw_informacion_hist_aviso.Object.gi_hist_avisos_fecha_res[1])
	sle_coordenadas_x.text = STRING(dw_informacion_hist_aviso.Object.gi_hist_avisos_coordenada_x[1])
	sle_coordenadas_y.text = STRING(dw_informacion_hist_aviso.Object.gi_hist_avisos_coordenada_y[1])
	mle_referencia.text = dw_informacion_hist_aviso.Object.gi_hist_avisos_referencia[1]
	sle_telef_cli.text = dw_informacion_hist_aviso.Object.gi_hist_avisos_tfno_cli[1]
	l_nro_incidencia = dw_informacion_hist_aviso.Object.gi_hist_avisos_nro_incidencia[1]
	mle_observaciones_tel.text = dw_informacion_hist_aviso.Object.gi_hist_avisos_obs_telegestiones[1]
	mle_observaciones_cor.text =dw_informacion_hist_aviso.Object.gi_hist_avisos_obs_cmd[1]
	
	return dw_informacion_hist_aviso.Object.gi_hist_avisos_nro_incidencia[1]
ELSE
	//ENVIAMOS MENSAJE DE ERROR
	//MessageBox("Error", "No se obtuvo informaci$$HEX1$$f300$$ENDHEX$$n")	
	return 0
END IF
end function

public function double f_query_hist_incidencia (double l_nro_incidencia_param);l_nro_incidencia =  l_nro_incidencia_param

if l_nro_incidencia = 0 then 
	return 0
end if

//OBTENEMOS INFORMACION DE LA INCIDENCIA
dw_inf_hist_inc.SetTransObject(SQLCA)
dw_inf_hist_inc.retrieve(l_nro_incidencia)

//VALIDAMOS QUE SE OBTUVIERON REGISTROS
IF dw_inf_hist_inc.rowcount() <> 0 THEN	

	//LLENAMOS CONTROLES CON LA INFORMACION
	sle_nro_incidencia.text = String(l_nro_incidencia)
	if not IsNull(dw_inf_hist_inc.Object.gi_hist_incidencias_instalacion_origen[1]) then
		l_instalacion =  dw_inf_hist_inc.Object.gi_hist_incidencias_instalacion_origen[1]
	elseif not isNull(dw_inf_hist_inc.Object.gi_hist_incidencias_nro_inst_afectada[1]) then
		l_instalacion = dw_inf_hist_inc.Object.gi_hist_incidencias_nro_inst_afectada[1]
	end if 
	dw_nom_inc.SetTransObject(SQLCA)
	dw_nom_inc.retrieve(l_instalacion)
	IF dw_nom_inc.rowcount() <> 0 THEN	
		sle_nombre_incidencia.text = dw_nom_inc.Object.nombre[1]
	end if
	sle_tension.text = dw_inf_hist_inc.Object.sgd_valor_tension[1]
	sle_accion_causante.text = dw_inf_hist_inc.Object.accion_incidencia[1]
	
	l_fecha = dw_inf_hist_inc.Object.gi_hist_incidencias_fecha_deteccion[1]
	
	//FORMATEMOS FECHA
	em_fecha_deteccion.text= f_formato_fechas(l_fecha)
	
	mle_descripcion_incidencia.text =  dw_inf_hist_inc.Object.gi_hist_incidencias_descripcion[1]
	sle_estado_incidencia.text = dw_inf_hist_inc.Object.sgd_valor_estado_actual[1]
	sle_tipo_incidencia.text = string( dw_inf_hist_inc.Object.sgd_valor_tipo_incidencia_a[1]  + "  -|-  "  + dw_inf_hist_inc.Object.sgd_valor_tipo_incidencia[1])
	mle_observacion.text = dw_inf_hist_inc.Object.gi_hist_incidencias_observacion[1]		
	
	//VALIDAMOS QUE EL COD DE OT NO SEA NULL
	IF NOT IsNull(dw_inf_hist_inc.Object.gi_hist_incidencias_ot[1]) THEN
		
		//VALIDAMOS QUE EL NRO DE BRIGADA NO SEA NULL
		IF NOT IsNull(dw_inf_hist_inc.Object.gi_hist_incidencias_nro_brigada[1]) THEN
			
			//VALIDAMOS QUE EL NRO DE BRIGADA SEA IGUAL A CERO (0)
			IF  dw_inf_hist_inc.Object.gi_hist_incidencias_nro_brigada[1] = 0 THEN
				
				sle_ot.text = string(dw_inf_hist_inc.Object.gi_hist_incidencias_ot[1])
			ELSE
				
				l_nro_brigada = dw_inf_hist_inc.Object.gi_hist_incidencias_nro_brigada[1]
				l_nro_ot = dw_inf_hist_inc.Object.gi_hist_incidencias_ot[1]
				
				//BUSCAMOS EL NOMBRE DE LA BRIGADA MEDIANTE EL NRO DE OT Y EL NRO DE BRIGADA
				SELECT NOMBRE
				INTO :l_nombre_brigada
				FROM GI_HIST_BRIGADA_OT
				WHERE NRO_BRIGADA = :l_nro_brigada
				AND NRO_OT = :l_nro_ot
				USING SQLCA;
				
				sle_ot.text = string(dw_inf_hist_inc.Object.gi_hist_incidencias_ot[1]) + "-" + l_nombre_brigada
			END IF
		END IF
	 END IF
	
	sle_tension_origen.text = dw_inf_hist_inc.Object.gi_hist_incidencias_tension_origen[1]
	sle_tension_afectada.text = dw_inf_hist_inc.Object.gi_hist_incidencias_tension_afectada[1]
	sle_agente.text = dw_inf_hist_inc.Object.gi_hist_incidencias_agente[1]
	mle_area_afec.text = dw_inf_hist_inc.Object.gi_hist_incidencias_area_afectada[1]
	
	//VALIDAMOS QUE  NO SE NULL LA CAUSA DE LA INCIDENCIA
	IF NOT IsNull(dw_inf_hist_inc.Object.gi_hist_incidencias_causa[1]) THEN
		
		//OBTENEMOS INFORMACION DE LA CAUSA.
		dw_inf_causa.SetTransObject(SQLCA)
		dw_inf_causa.retrieve(dw_inf_hist_inc.Object.gi_hist_incidencias_causa[1],l_nro_incidencia)		
		
		//VALIDAMOS QUE SE OBTUVIERAN REGISTROS
		IF dw_inf_causa.rowcount() <> 0 THEN	
			sle_causa.text = dw_inf_causa.Object.descripcion[1]			
		END IF
	END IF

	//VALIDAMOS QUE  NO SE NULL LA  SUB-CAUSA DE LA INCIDENCIA
	IF NOT IsNull(dw_inf_hist_inc.Object.gi_hist_incidencias_sub_causa[1]) THEN

		//OBTENEMOS INFORMACION DE LA SUB-CAUSA.
		dw_inf_sub_causa.SetTransObject(SQLCA)
		dw_inf_sub_causa.retrieve(dw_inf_hist_inc.Object.gi_hist_incidencias_sub_causa[1],l_nro_incidencia)
		//VALIDAMOS QUE SE OBTUVIERAN REGISTROS
		IF dw_inf_sub_causa.rowcount() <> 0 THEN	
			sle_sub_causa.text = dw_inf_sub_causa.Object.descripcion[1]
		END IF
	END IF
	
	//VALIDAMOS QUE  NO SE NULL EL ELEMENTO OPERADO
	IF NOT IsNull(dw_inf_hist_inc.Object.cod_elem_operado[1]) THEN
		
		//OBTENEMOS INFORMACION DEL ELEMENTO OPERADO.
		dw_inf_elem_operado.SetTransObject(SQLCA)
		dw_inf_elem_operado.retrieve(dw_inf_hist_inc.Object.cod_elem_operado[1])
		
		//VALIDAMOS QUE SE OBTUVIERAN REGISTROS
		IF dw_inf_elem_operado.rowcount() <> 0 THEN	
			sle_eop.text = dw_inf_elem_operado.Object.descripcion[1]
		END IF
	END IF
		
	//VALIDAMOS QUE  NO SE NULL EL ELEMENTO FALLADO
	IF NOT IsNull(dw_inf_hist_inc.Object.cod_elem_fallado[1]) THEN
		
		//OBTENEMOS INFORMACION DEL ELEMENTO FALLADO.
		dw_inf_elem_fallado.SetTransObject(SQLCA)
		dw_inf_elem_fallado.retrieve(dw_inf_hist_inc.Object.cod_elem_fallado[1])
		
		//VALIDAMOS QUE SE OBTUVIERAN REGISTROS
		IF dw_inf_elem_fallado.rowcount() <> 0 THEN	
			sle_efa.text = dw_inf_elem_fallado.Object.descripcion[1]				
		END IF
	END IF
END IF

if l_nro_incidencia > 0 then
	cb_avi_aso.ENABLED = true
end if

return 0
end function

public function double f_query_hist_descargo (double l_nro_descargo_param);l_nro_descargo = l_nro_descargo_param

if l_nro_incidencia = 0 then 
	return  0
end if

//OBTENEMOS LA INFORMACION DEL DESCARGO
dw_hist_descargos.SetTransObject(SQLCA)
dw_hist_descargos.retrieve(l_nro_descargo)

//VALIDAMOS QUE SE OBTUVIERON REGISTROS
IF  dw_hist_descargos.rowcount() <> 0 THEN

	//LLENAMOS LOS CONTROLES CON LA INFORMACION DEL DESCARGO
	l_fecha = dw_hist_descargos.Object.gi_hist_descargos_inicio_solicitado[1]
	em_inicio_solicitado.Text = f_formato_fechas(l_fecha)
	l_fecha = dw_hist_descargos.Object.gi_hist_descargos_final_solicitado[1]
	em_final_solicitado.Text = f_formato_fechas(l_fecha)
	mle_obs_descargos.text = dw_descargos.Object.gi_hist_descargos_observaciones[1]

	//OBTENEMOS LAS HORAS DE INTERRUPCION
	hora  = (dw_hist_descargos.Object.tiempo_interrupcion_total[1]/60)
	hora = Round(hora, 2)
	
	//SE LA HORA ES MAYOR A 1 PONEMOS EN PLURAL "HORAS"
	IF hora > 1 THEN
		
		sle_tiempo_int.Text = String(hora) + " Horas"
	ELSEIF hora <= 1  THEN
		
		sle_tiempo_int.Text = String(hora) + " Hora"
	END IF
	
	mle_insta_afec.Text = dw_hist_descargos.Object.sgd_instalacion_instalacion_afectadas[1]
END IF

return 0
end function

public function integer f_query_nis (double l_nis_rad_param);l_nis_rad = l_nis_rad_param

sle_nis_avi.Text = String(l_nis_rad)

//OBTENEMOS EL COD_CLI Y NIF MEDIANTE EL NIS_RAD DEL AVISO
SELECT COD_CLI, NIF 
INTO :l_cod_cli, :l_nif
FROM SUMCON 
WHERE NIS_RAD = :l_nis_rad 
USING SQLCA;

//IF SQLCA2.sqlcode = 100 THEN
//	MessageBox("NIS", "No se obtuvo informaci$$HEX1$$f300$$ENDHEX$$n del NIS asociado al Aviso")	
//	return 0
//END IF

IF SQLCA.sqlcode <> 0 and SQLCA.sqlcode <> 100 THEN
	MessageBox("Error", SQLCA.sqlerrtext)	
	return 0
END IF

//BUSCAMOS TODA LA INFORMACI$$HEX1$$d300$$ENDHEX$$N DEL SUMINISTRO (NOMBRE, DIRECCION, ETC)
dw_informacion_nis.SetTransObject(SQLCA)
dw_informacion_nis.retrieve(l_nif, l_cod_cli)

	
//COMPROBAMOS QUE SE OBTUVO REGISTRO DE LA BUSQUEDA
IF  dw_informacion_nis.rowcount() <> 0 THEN 
	
	//LLENAMOS LOS CONTROLES CON LA INFORMACI$$HEX1$$d300$$ENDHEX$$N DEL NIS.
	sle_cliente.text = dw_informacion_nis.Object.nombre_completo[1]
	mle_direccion.text = dw_informacion_nis.Object.dirrecion[1]
	sle_depto.text = dw_informacion_nis.Object.departamento[1]
	sle_muni.text = dw_informacion_nis.Object.municipio[1]
	sle_zona.text = dw_informacion_nis.Object.zona[1]
	sle_local.text = dw_informacion_nis.Object.localidad[1]
	sle_documento.text = dw_informacion_nis.Object.documento[1]
END IF //registros de dw_informacion_nis es distinto a cero	
end function

public subroutine f_limpiar_controles ();cb_avi_aso.Enabled = false
p_alarmas.Enabled = false
st_alarmas.Enabled = false
p_alarmas_2.Enabled = false
st_alarmas_2.Enabled = false
p_alarmas_3.Enabled = false				
st_alarmas_3.Enabled = false

p_alarmas.Visible = false
st_alarmas.Visible = false
p_alarmas_2.Visible = false
st_alarmas_2.Visible = false
p_alarmas_3.Visible = false				
st_alarmas_3.Visible = false
cb_gestion_improcedente.Visible = false //hespinoza - boton gestion improcedente
gb_11.visible = false //hespinoza - seguimiento brimovil
p_1.visible = false //hespinoza - seguimiento brimovil
cb_seguimiento_bri.visible = false //hespinoza - seguimiento brimovil


sle_accion_causante.Text = ""
sle_agente.Text = ""
sle_alcance_avi.Text = ""
sle_causa.Text = ""
sle_cliente.Text = ""
sle_coordenadas_x.Text = ""
sle_coordenadas_y.Text = ""
sle_depto.Text = ""
//sle_deteccion_avi.Text = ""
sle_documento.Text = ""
sle_duracion_avi.Text = ""
sle_efa.Text = ""
sle_eop.Text = ""
sle_estado_avi.Text = ""
sle_estado_incidencia.Text = ""
sle_improc_avi.Text = ""
sle_ingresado_avi.Text = ""
sle_local.Text = ""
sle_muni.Text = ""
sle_nis_avi.Text = ""
sle_nombre_incidencia.Text = ""
sle_nro_aviso_avi.Text = ""
sle_nro_incidencia.Text = ""
sle_ot.Text = ""
sle_previas_avi.Text = ""
sle_prioridad_avi.Text = ""
sle_resuelto_avi.Text = ""
sle_sector_avi.Text = ""
sle_sub_causa.Text = ""
sle_telef_cli.Text = ""
sle_tension.Text = ""
sle_tension_afectada.Text = ""
sle_tension_origen.Text = ""
sle_tiempo_int.Text = ""
sle_tipo_avi.Text = ""
sle_tipo_incidencia.Text = ""
sle_zona.Text = ""
sle_zona_avi.Text = ""
sle_f_deteccion.text =  ""

p_alarmas.PictureName = ""
st_alarmas.Text = ""
p_alarmas_2.PictureName = ""
st_alarmas_2.Text = ""
p_alarmas_3.PictureName = ""				
st_alarmas_3.Text = ""


gb_aso_inc.Text = "AVISOS ASOCIADOS A LA INCIDENCIA"

mle_area_afec.Text = ""
mle_descripcion_incidencia.Text = ""
mle_direccion.Text = ""
mle_insta_afec.Text = ""
mle_obs_descargos.Text = ""
mle_observacion.Text = ""
mle_observaciones_cor.Text = ""
mle_observaciones_tel.Text = ""
mle_referencia.Text = ""

em_fecha_deteccion.Text = "00     0000 00:00:00"
em_final_solicitado.Text = "00     0000 00:00:00"
em_inicio_solicitado.Text = "00     0000 00:00:00"

dw_aviso_asociados.reset()
end subroutine

public function double f_avisos_alarmas (double l_nro_avi_param);double l_nro_instalacion
double l_ind_peligro
double l_clase_aviso
double l_nis
integer l_cli_imp

DECLARE alarm_curs CURSOR FOR 
SELECT NRO_INSTALACION 
FROM GI_AVISOS_INSTALACION 
WHERE NRO_AVISO = :l_nro_avi_param
using sqlca; 
OPEN alarm_curs; 

if SQLCA.sqlcode <> 0 then 
	MessageBox("Error Alarmas",SQLCA.sqlerrtext) 
end if 

DO WHILE SQLCA.sqlcode = 0 

	FETCH alarm_curs 
	INTO :l_nro_instalacion; 
	
	if l_nro_instalacion = 0 then 
		exit
	end if
	
	if SQLCA.sqlcode <> 0 then 
		MessageBox("Error Alarmas",SQLCA.sqlerrtext) 
	elseif SQLCA.sqlcode = 0 then 
		choose case l_nro_instalacion
			case 99999999
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/CONALIM_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Con Alimentaci$$HEX1$$f300$$ENDHEX$$n"
				exit
			case 88888888
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/SINALIM_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Sin Alimentaci$$HEX1$$f300$$ENDHEX$$n"
				exit
			case 77777777
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/AYUDA_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Ayuda"
				exit
			case 66666666 
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/ALUMBRADO_AVI.bmp"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Alumbrado P$$HEX1$$fa00$$ENDHEX$$blico"
				exit
			case 55555559 
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/CALIDAD_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Calidad"
				exit    
			case 55555558 
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/CALIDAD_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Calidad sin alimentaci$$HEX1$$f300$$ENDHEX$$n"
				exit
			case 55555555
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/CALIDAD_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Calidad"
				exit
		end choose
	end if 

LOOP 

IF SQLCA.sqlcode = 100 then
	
	SELECT CLASE_AVISO 
	INTO :l_clase_aviso
	FROM GI_AVISOS
	WHERE NRO_AVISO =  :l_nro_avi_param
	USING SQLCA;
	
	choose case l_clase_aviso
		case 1
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/AYUDA_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Ayuda"
		case 2
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/ALUMBRADO_AVI.bmp"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Alumbrado P$$HEX1$$fa00$$ENDHEX$$blico"
		case 3
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/CALIDAD_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Calidad"
	end choose	
end if

CLOSE alarm_curs; 

SELECT NIS_RAD 
INTO :l_nis
FROM GI_AVISOS
WHERE NRO_AVISO =  :l_nro_avi_param
USING SQLCA;

l_cli_imp = fw_a_importante(l_nis)

if l_cli_imp = 1 then
	
	if gi_ind_cli_esen = 1 then
		p_alarmas_3.visible = true				
		st_alarmas_3.visible = true
		p_alarmas_3.PictureName = "pict/" + gs_img_carga
		p_alarmas_3.width = 120
		p_alarmas_3.height = 120
		st_alarmas_3.Text = "Carga Esencial"
	else
		p_alarmas_3.visible = true				
		st_alarmas_3.visible = true
		p_alarmas_3.PictureName = "pict/CLIIMP.BMP"
		p_alarmas_3.width = 120
		p_alarmas_3.height = 120
		st_alarmas_3.Text = "Cliente Importante"	
	end if
end if 

select ind_peligro
into :l_ind_peligro 
from gi_avisos 
where nro_aviso = :l_nro_avi_param;

if l_ind_peligro = 1 then
	p_alarmas_2.visible = true				
	st_alarmas_2.visible = true
	p_alarmas_2.PictureName = "pict/PELIGRO1.BMP"
	p_alarmas_2.width = 120
	p_alarmas_2.height = 120
	st_alarmas_2.Text = "Peligro"	
end if

l_nro_instalacion = 0

SELECT NRO_INSTALACION 
INTO :l_nro_instalacion
FROM GI_AVISOS WHERE NRO_AVISO = :l_nro_avi_param
USING SQLCA;

if SQLCA.sqlcode = 0 then 
		choose case l_nro_instalacion
			case 99999999
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/CONALIM_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Con Alimentaci$$HEX1$$f300$$ENDHEX$$n"
				exit
			case 88888888
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/SINALIM_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Sin Alimentaci$$HEX1$$f300$$ENDHEX$$n"
				exit
			case 77777777
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/AYUDA_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Ayuda"
				exit
			case 66666666 
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/ALUMBRADO_AVI.bmp"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Alumbrado P$$HEX1$$fa00$$ENDHEX$$blico"
				exit
			case 55555559 
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/CALIDAD_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Calidad"
				exit    
			case 55555558 
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/CALIDAD_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Calidad sin alimentaci$$HEX1$$f300$$ENDHEX$$n"
				exit
			case 55555555
				p_alarmas.visible = true				
				st_alarmas.visible = true
				p_alarmas.PictureName = "pict/CALIDAD_AVI.BMP"
				p_alarmas.width = 120
				p_alarmas.height = 120
				st_alarmas.Text = "Calidad"
				exit
		end choose
end if 

return 0




end function

public function integer f_query_avisos_varios (long l_param_nro_aviso);//BUSCAMOS TODA LA INFORMACI$$HEX1$$d300$$ENDHEX$$N DEL SUMINISTRO (NOMBRE, DIRECCION, ETC)
dw_avisos_varios.SetTransObject(SQLCA)
dw_avisos_varios.retrieve(l_param_nro_aviso)

	
//COMPROBAMOS QUE SE OBTUVO REGISTRO DE LA BUSQUEDA
IF  dw_avisos_varios.rowcount() <> 0 THEN 	
	//LLENAMOS LOS CONTROLES CON LA INFORMACI$$HEX1$$d300$$ENDHEX$$N DEL NIS.
	sle_cliente.text = dw_avisos_varios.Object.nombre[1]
	mle_direccion.text = dw_avisos_varios.Object.direccion[1]
	sle_depto.text = dw_avisos_varios.Object.departamento[1]
	sle_muni.text = dw_avisos_varios.Object.municipio[1]
	sle_zona.text = dw_avisos_varios.Object.zona[1]
	sle_local.text = dw_avisos_varios.Object.localidad[1]
END IF //registros de dw_informacion_nis es distinto a cero	

return 0
end function

public function integer fw_a_importante (double pl_nis);string ls_tipo, ls_carga, ls_img_carga

SELECT "GI_SUMINISTROS_IMP"."CARGA_ES", "GI_SUMINISTROS_IMP"."TIPO_CARGA_ES", "SGD_VALOR"."DESCRIPCION"
INTO :ls_carga, :ls_tipo, :ls_img_carga
FROM "GI_SUMINISTROS_IMP",   "SGD_VALOR"
WHERE "GI_SUMINISTROS_IMP"."NIS_RAD" = :pl_nis AND
		"GI_SUMINISTROS_IMP"."F_EXPIRACION" > sysdate AND
		"SGD_VALOR"."CODIF"(+) = 'ESEN' AND 
		"SGD_VALOR"."VALOR"(+) = "GI_SUMINISTROS_IMP"."TIPO_CARGA_ES"
USING sqlca;

IF sqlca.SqlCode = 0 THEN
	
	IF ls_carga = 'N' THEN
		
		gi_ind_cli_esen = 0
	ELSEIF ls_carga = 'S' THEN
		
		gi_ind_cli_esen = 1
		gs_tip_carga = ls_tipo
		gs_img_carga = ls_img_carga 
	END IF
	
ELSEIF sqlca.SqlCode = -1 THEN
	//gnv_msg.f_mensaje("ER05","","",OK!)
	RETURN -1
ELSE
	
	gi_ind_cli_imp = 0
	RETURN 0
END IF

return 1

end function

event open;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: w_consulta_incidencia
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se consultan los datos de las incidencia donde el suministro se ingresa
//EDM-14
//Creado:19/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

st_parametros = Message.PowerObjectParm


boolean flag

if isValid(st_parametros) then
	flag = true
else
	flag = false
end if

openwithparm(w_msg,"Cargando...")

l_search_aviso = false
l_search_nis = true

close(w_msg)

if flag then
	if (st_parametros.l_nro_aviso > 0) then 
		f_retrieve_aviso(st_parametros.l_nro_aviso)
	else
		f_query_nis(st_parametros.l_nis_rad)
		f_query_incidencia(st_parametros.l_nro_incidencia)
		
	end if
	
end if
end event

on w_consulta_incidencia.create
this.p_1=create p_1
this.cb_seguimiento_bri=create cb_seguimiento_bri
this.cb_gestion_improcedente=create cb_gestion_improcedente
this.sle_f_deteccion=create sle_f_deteccion
this.gb_10=create gb_10
this.gb_8=create gb_8
this.st_alarmas_3=create st_alarmas_3
this.p_alarmas_3=create p_alarmas_3
this.st_alarmas_2=create st_alarmas_2
this.p_alarmas_2=create p_alarmas_2
this.dw_avisos_varios=create dw_avisos_varios
this.st_alarmas=create st_alarmas
this.p_alarmas=create p_alarmas
this.gb_6=create gb_6
this.sle_nis_avi=create sle_nis_avi
this.dw_nom_inc=create dw_nom_inc
this.st_28=create st_28
this.mle_obs_descargos=create mle_obs_descargos
this.sle_telef_cli=create sle_telef_cli
this.mle_referencia=create mle_referencia
this.st_27=create st_27
this.dw_hist_descargos=create dw_hist_descargos
this.dw_inf_hist_inc=create dw_inf_hist_inc
this.st_19=create st_19
this.dw_informacion_hist_aviso=create dw_informacion_hist_aviso
this.st_17=create st_17
this.dw_mesa=create dw_mesa
this.dw_centro=create dw_centro
this.st_13=create st_13
this.st_12=create st_12
this.st_9=create st_9
this.dw_informacion_aviso=create dw_informacion_aviso
this.st_26=create st_26
this.st_5=create st_5
this.sle_nro_incidencia=create sle_nro_incidencia
this.mle_observaciones_cor=create mle_observaciones_cor
this.mle_observaciones_tel=create mle_observaciones_tel
this.st_25=create st_25
this.sle_duracion_avi=create sle_duracion_avi
this.st_24=create st_24
this.sle_coordenadas_y=create sle_coordenadas_y
this.sle_coordenadas_x=create sle_coordenadas_x
this.sle_resuelto_avi=create sle_resuelto_avi
this.sle_deteccion_avi=create sle_deteccion_avi
this.sle_ingresado_avi=create sle_ingresado_avi
this.st_23=create st_23
this.sle_previas_avi=create sle_previas_avi
this.sle_improc_avi=create sle_improc_avi
this.sle_nro_aviso_avi=create sle_nro_aviso_avi
this.sle_prioridad_avi=create sle_prioridad_avi
this.sle_tipo_avi=create sle_tipo_avi
this.sle_alcance_avi=create sle_alcance_avi
this.st_22=create st_22
this.st_21=create st_21
this.sle_estado_avi=create sle_estado_avi
this.dw_aviso_asociados=create dw_aviso_asociados
this.cb_avi_aso=create cb_avi_aso
this.rb_nro_aviso=create rb_nro_aviso
this.rb_nis=create rb_nis
this.sle_tiempo_int=create sle_tiempo_int
this.st_14=create st_14
this.em_final_solicitado=create em_final_solicitado
this.em_inicio_solicitado=create em_inicio_solicitado
this.mle_insta_afec=create mle_insta_afec
this.mle_area_afec=create mle_area_afec
this.st_16=create st_16
this.st_15=create st_15
this.sle_agente=create sle_agente
this.sle_tension_afectada=create sle_tension_afectada
this.sle_tension_origen=create sle_tension_origen
this.mle_observacion=create mle_observacion
this.st_11=create st_11
this.sle_tipo_incidencia=create sle_tipo_incidencia
this.st_10=create st_10
this.st_8=create st_8
this.st_6=create st_6
this.st_4=create st_4
this.st_3=create st_3
this.sle_estado_incidencia=create sle_estado_incidencia
this.sle_efa=create sle_efa
this.sle_eop=create sle_eop
this.sle_sub_causa=create sle_sub_causa
this.sle_causa=create sle_causa
this.sle_ot=create sle_ot
this.mle_descripcion_incidencia=create mle_descripcion_incidencia
this.sle_tension=create sle_tension
this.st_2=create st_2
this.sle_nombre_incidencia=create sle_nombre_incidencia
this.sle_documento=create sle_documento
this.st_1=create st_1
this.sle_zona=create sle_zona
this.sle_local=create sle_local
this.sle_muni=create sle_muni
this.sle_depto=create sle_depto
this.st_7=create st_7
this.mle_direccion=create mle_direccion
this.st_3x=create st_3x
this.st_cliente=create st_cliente
this.sle_cliente=create sle_cliente
this.cb_consultar=create cb_consultar
this.sle_nis=create sle_nis
this.em_fecha_deteccion=create em_fecha_deteccion
this.sle_accion_causante=create sle_accion_causante
this.gb_2=create gb_2
this.dw_consulta_incidencia=create dw_consulta_incidencia
this.gb_3=create gb_3
this.dw_inf_causa=create dw_inf_causa
this.dw_inf_sub_causa=create dw_inf_sub_causa
this.dw_inf_elem_fallado=create dw_inf_elem_fallado
this.dw_inf_elem_operado=create dw_inf_elem_operado
this.dw_tension=create dw_tension
this.dw_informacion_nis=create dw_informacion_nis
this.gb_5=create gb_5
this.dw_descargos=create dw_descargos
this.gb_avisos_asociados=create gb_avisos_asociados
this.gb_aso_inc=create gb_aso_inc
this.gb_4=create gb_4
this.gb_1=create gb_1
this.st_18=create st_18
this.sle_zona_avi=create sle_zona_avi
this.st_20=create st_20
this.sle_sector_avi=create sle_sector_avi
this.gb_7=create gb_7
this.gb_9=create gb_9
this.gb_11=create gb_11
this.Control[]={this.p_1,&
this.cb_seguimiento_bri,&
this.cb_gestion_improcedente,&
this.sle_f_deteccion,&
this.gb_10,&
this.gb_8,&
this.st_alarmas_3,&
this.p_alarmas_3,&
this.st_alarmas_2,&
this.p_alarmas_2,&
this.dw_avisos_varios,&
this.st_alarmas,&
this.p_alarmas,&
this.gb_6,&
this.sle_nis_avi,&
this.dw_nom_inc,&
this.st_28,&
this.mle_obs_descargos,&
this.sle_telef_cli,&
this.mle_referencia,&
this.st_27,&
this.dw_hist_descargos,&
this.dw_inf_hist_inc,&
this.st_19,&
this.dw_informacion_hist_aviso,&
this.st_17,&
this.dw_mesa,&
this.dw_centro,&
this.st_13,&
this.st_12,&
this.st_9,&
this.dw_informacion_aviso,&
this.st_26,&
this.st_5,&
this.sle_nro_incidencia,&
this.mle_observaciones_cor,&
this.mle_observaciones_tel,&
this.st_25,&
this.sle_duracion_avi,&
this.st_24,&
this.sle_coordenadas_y,&
this.sle_coordenadas_x,&
this.sle_resuelto_avi,&
this.sle_deteccion_avi,&
this.sle_ingresado_avi,&
this.st_23,&
this.sle_previas_avi,&
this.sle_improc_avi,&
this.sle_nro_aviso_avi,&
this.sle_prioridad_avi,&
this.sle_tipo_avi,&
this.sle_alcance_avi,&
this.st_22,&
this.st_21,&
this.sle_estado_avi,&
this.dw_aviso_asociados,&
this.cb_avi_aso,&
this.rb_nro_aviso,&
this.rb_nis,&
this.sle_tiempo_int,&
this.st_14,&
this.em_final_solicitado,&
this.em_inicio_solicitado,&
this.mle_insta_afec,&
this.mle_area_afec,&
this.st_16,&
this.st_15,&
this.sle_agente,&
this.sle_tension_afectada,&
this.sle_tension_origen,&
this.mle_observacion,&
this.st_11,&
this.sle_tipo_incidencia,&
this.st_10,&
this.st_8,&
this.st_6,&
this.st_4,&
this.st_3,&
this.sle_estado_incidencia,&
this.sle_efa,&
this.sle_eop,&
this.sle_sub_causa,&
this.sle_causa,&
this.sle_ot,&
this.mle_descripcion_incidencia,&
this.sle_tension,&
this.st_2,&
this.sle_nombre_incidencia,&
this.sle_documento,&
this.st_1,&
this.sle_zona,&
this.sle_local,&
this.sle_muni,&
this.sle_depto,&
this.st_7,&
this.mle_direccion,&
this.st_3x,&
this.st_cliente,&
this.sle_cliente,&
this.cb_consultar,&
this.sle_nis,&
this.em_fecha_deteccion,&
this.sle_accion_causante,&
this.gb_2,&
this.dw_consulta_incidencia,&
this.gb_3,&
this.dw_inf_causa,&
this.dw_inf_sub_causa,&
this.dw_inf_elem_fallado,&
this.dw_inf_elem_operado,&
this.dw_tension,&
this.dw_informacion_nis,&
this.gb_5,&
this.dw_descargos,&
this.gb_avisos_asociados,&
this.gb_aso_inc,&
this.gb_4,&
this.gb_1,&
this.st_18,&
this.sle_zona_avi,&
this.st_20,&
this.sle_sector_avi,&
this.gb_7,&
this.gb_9,&
this.gb_11}
end on

on w_consulta_incidencia.destroy
destroy(this.p_1)
destroy(this.cb_seguimiento_bri)
destroy(this.cb_gestion_improcedente)
destroy(this.sle_f_deteccion)
destroy(this.gb_10)
destroy(this.gb_8)
destroy(this.st_alarmas_3)
destroy(this.p_alarmas_3)
destroy(this.st_alarmas_2)
destroy(this.p_alarmas_2)
destroy(this.dw_avisos_varios)
destroy(this.st_alarmas)
destroy(this.p_alarmas)
destroy(this.gb_6)
destroy(this.sle_nis_avi)
destroy(this.dw_nom_inc)
destroy(this.st_28)
destroy(this.mle_obs_descargos)
destroy(this.sle_telef_cli)
destroy(this.mle_referencia)
destroy(this.st_27)
destroy(this.dw_hist_descargos)
destroy(this.dw_inf_hist_inc)
destroy(this.st_19)
destroy(this.dw_informacion_hist_aviso)
destroy(this.st_17)
destroy(this.dw_mesa)
destroy(this.dw_centro)
destroy(this.st_13)
destroy(this.st_12)
destroy(this.st_9)
destroy(this.dw_informacion_aviso)
destroy(this.st_26)
destroy(this.st_5)
destroy(this.sle_nro_incidencia)
destroy(this.mle_observaciones_cor)
destroy(this.mle_observaciones_tel)
destroy(this.st_25)
destroy(this.sle_duracion_avi)
destroy(this.st_24)
destroy(this.sle_coordenadas_y)
destroy(this.sle_coordenadas_x)
destroy(this.sle_resuelto_avi)
destroy(this.sle_deteccion_avi)
destroy(this.sle_ingresado_avi)
destroy(this.st_23)
destroy(this.sle_previas_avi)
destroy(this.sle_improc_avi)
destroy(this.sle_nro_aviso_avi)
destroy(this.sle_prioridad_avi)
destroy(this.sle_tipo_avi)
destroy(this.sle_alcance_avi)
destroy(this.st_22)
destroy(this.st_21)
destroy(this.sle_estado_avi)
destroy(this.dw_aviso_asociados)
destroy(this.cb_avi_aso)
destroy(this.rb_nro_aviso)
destroy(this.rb_nis)
destroy(this.sle_tiempo_int)
destroy(this.st_14)
destroy(this.em_final_solicitado)
destroy(this.em_inicio_solicitado)
destroy(this.mle_insta_afec)
destroy(this.mle_area_afec)
destroy(this.st_16)
destroy(this.st_15)
destroy(this.sle_agente)
destroy(this.sle_tension_afectada)
destroy(this.sle_tension_origen)
destroy(this.mle_observacion)
destroy(this.st_11)
destroy(this.sle_tipo_incidencia)
destroy(this.st_10)
destroy(this.st_8)
destroy(this.st_6)
destroy(this.st_4)
destroy(this.st_3)
destroy(this.sle_estado_incidencia)
destroy(this.sle_efa)
destroy(this.sle_eop)
destroy(this.sle_sub_causa)
destroy(this.sle_causa)
destroy(this.sle_ot)
destroy(this.mle_descripcion_incidencia)
destroy(this.sle_tension)
destroy(this.st_2)
destroy(this.sle_nombre_incidencia)
destroy(this.sle_documento)
destroy(this.st_1)
destroy(this.sle_zona)
destroy(this.sle_local)
destroy(this.sle_muni)
destroy(this.sle_depto)
destroy(this.st_7)
destroy(this.mle_direccion)
destroy(this.st_3x)
destroy(this.st_cliente)
destroy(this.sle_cliente)
destroy(this.cb_consultar)
destroy(this.sle_nis)
destroy(this.em_fecha_deteccion)
destroy(this.sle_accion_causante)
destroy(this.gb_2)
destroy(this.dw_consulta_incidencia)
destroy(this.gb_3)
destroy(this.dw_inf_causa)
destroy(this.dw_inf_sub_causa)
destroy(this.dw_inf_elem_fallado)
destroy(this.dw_inf_elem_operado)
destroy(this.dw_tension)
destroy(this.dw_informacion_nis)
destroy(this.gb_5)
destroy(this.dw_descargos)
destroy(this.gb_avisos_asociados)
destroy(this.gb_aso_inc)
destroy(this.gb_4)
destroy(this.gb_1)
destroy(this.st_18)
destroy(this.sle_zona_avi)
destroy(this.st_20)
destroy(this.sle_sector_avi)
destroy(this.gb_7)
destroy(this.gb_9)
destroy(this.gb_11)
end on

event close;gu_comunic.is_comunic.longval3 = 0
gu_comunic.is_comunic.longval5 = 1
gu_comunic.is_comunic.longval1 = 0
gu_comunic.is_comunic.accion_llamada = ""
gu_comunic.is_comunic.programa_llamante = ""
end event

type p_1 from picture within w_consulta_incidencia
boolean visible = false
integer x = 4640
integer y = 144
integer width = 110
integer height = 112
string picturename = ".\pict\brig.png"
boolean focusrectangle = false
end type

type cb_seguimiento_bri from commandbutton within w_consulta_incidencia
boolean visible = false
integer x = 4768
integer y = 140
integer width = 841
integer height = 112
integer taborder = 40
integer textsize = -11
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
string text = "SEGUIMIENTO BRIMOVIL"
end type

event clicked;openwithparm(w_seguimiento_brimovil, l_nro_aviso)
end event

type cb_gestion_improcedente from commandbutton within w_consulta_incidencia
boolean visible = false
integer x = 690
integer y = 2328
integer width = 722
integer height = 112
integer taborder = 150
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
string text = "Gesti$$HEX1$$f300$$ENDHEX$$n Improcendente"
end type

event clicked;//***************************************
//**  OSGI 2001.1  	19/03/2001			**
//**  Jair Padilla / Soluziona PANAMA  **
//***************************************
string ls_observaciones
long ll_nro_aviso

//ll_nro_aviso = d_aviso.GetItemNumber(d_aviso.GetRow(), "nro_aviso")
ll_nro_aviso =l_nro_aviso
// TDA.INI.EDM-3.19052017

//SELECT "GI_AVISOS"."OBS_IMPROC"  
//  INTO :ls_observaciones  
//  FROM "GI_AVISOS"  
// WHERE "GI_AVISOS"."NRO_AVISO" = :ll_nro_aviso   ;

// Se manda como parametro al a ventana el nro de aviso
OpenWithParm(w_mensaje_improcedente, string(ll_nro_aviso))
// TDA.FIN.EDM-3.19052017
//***************************************
//**  OSGI 2001.1  	19/03/2001			**
//**  Jair Padilla / Soluziona PANAMA  **
//***************************************
end event

type sle_f_deteccion from singlelineedit within w_consulta_incidencia
integer x = 1230
integer y = 904
integer width = 859
integer height = 76
integer taborder = 120
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type gb_10 from groupbox within w_consulta_incidencia
integer x = 3365
integer width = 9
integer height = 200
integer taborder = 40
integer textsize = -11
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long backcolor = 67108864
string text = "none"
end type

type gb_8 from groupbox within w_consulta_incidencia
integer x = 2885
integer width = 9
integer height = 200
integer taborder = 40
integer textsize = -11
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long backcolor = 67108864
string text = "none"
end type

type st_alarmas_3 from statictext within w_consulta_incidencia
boolean visible = false
integer x = 3566
integer y = 76
integer width = 613
integer height = 80
integer textsize = -11
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long backcolor = 67108864
boolean focusrectangle = false
end type

type p_alarmas_3 from picture within w_consulta_incidencia
boolean visible = false
integer x = 3424
integer y = 56
integer width = 119
integer height = 120
boolean focusrectangle = false
end type

type st_alarmas_2 from statictext within w_consulta_incidencia
boolean visible = false
integer x = 3081
integer y = 76
integer width = 242
integer height = 80
integer textsize = -11
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long backcolor = 67108864
boolean focusrectangle = false
end type

type p_alarmas_2 from picture within w_consulta_incidencia
boolean visible = false
integer x = 2939
integer y = 56
integer width = 119
integer height = 120
boolean focusrectangle = false
end type

type dw_avisos_varios from datawindow within w_consulta_incidencia
integer x = 5
integer y = 4
integer width = 5
integer height = 4
integer taborder = 40
string title = "none"
string dataobject = "dw_avisos_varios"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type st_alarmas from statictext within w_consulta_incidencia
boolean visible = false
integer x = 2249
integer y = 76
integer width = 608
integer height = 80
integer textsize = -11
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long backcolor = 67108864
boolean focusrectangle = false
end type

type p_alarmas from picture within w_consulta_incidencia
boolean visible = false
integer x = 2112
integer y = 56
integer width = 119
integer height = 120
boolean focusrectangle = false
end type

type gb_6 from groupbox within w_consulta_incidencia
integer x = 14
integer y = 1076
integer width = 530
integer height = 360
integer taborder = 40
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16711680
long backcolor = 67108864
string text = "Ambito"
end type

type sle_nis_avi from singlelineedit within w_consulta_incidencia
integer x = 1806
integer y = 344
integer width = 283
integer height = 76
integer taborder = 100
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type dw_nom_inc from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 40
string title = "none"
string dataobject = "ddw_nom_inc"
boolean livescroll = true
end type

type st_28 from statictext within w_consulta_incidencia
integer x = 4215
integer y = 2116
integer width = 1824
integer height = 64
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Observaciones Descargo."
boolean focusrectangle = false
end type

type mle_obs_descargos from multilineedit within w_consulta_incidencia
integer x = 4215
integer y = 2172
integer width = 1824
integer height = 300
integer taborder = 50
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
textcase textcase = upper!
boolean displayonly = true
end type

event getfocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_observacion
//Evento: getfocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se Activa el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

openwithparm(w_observaciones,this.text)
This.VScrollBar = true
end event

event losefocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_observacion
//Evento: losefocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se desactiva el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


This.VScrollBar = false
end event

type sle_telef_cli from singlelineedit within w_consulta_incidencia
integer x = 622
integer y = 904
integer width = 599
integer height = 76
integer taborder = 90
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type mle_referencia from multilineedit within w_consulta_incidencia
integer x = 14
integer y = 624
integer width = 2075
integer height = 76
integer taborder = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
textcase textcase = upper!
boolean displayonly = true
end type

event getfocus;this.VScrollBar = true
end event

event losefocus;this.VScrollBar = false
end event

type st_27 from statictext within w_consulta_incidencia
integer x = 14
integer y = 564
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
boolean enabled = false
string text = "Referencia:"
boolean focusrectangle = false
end type

type dw_hist_descargos from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 120
string title = "none"
string dataobject = "dw_hist_descargos_consul"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type dw_inf_hist_inc from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 40
string title = "none"
string dataobject = "dw_inf_hist_inc"
boolean livescroll = true
end type

type st_19 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 1220
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Accion de Incidencia"
boolean focusrectangle = false
end type

type dw_informacion_hist_aviso from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 100
string title = "none"
string dataobject = "dw_informacion_hist_aviso"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type st_17 from statictext within w_consulta_incidencia
integer x = 14
integer y = 1600
integer width = 379
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
boolean enabled = false
string text = "Improcedente:"
boolean focusrectangle = false
end type

type dw_mesa from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 50
string title = "none"
string dataobject = "ddw_mesa"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type dw_centro from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 130
string title = "none"
string dataobject = "ddw_centro"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type st_13 from statictext within w_consulta_incidencia
integer x = 14
integer y = 2020
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 15793151
long backcolor = 128
boolean enabled = false
string text = "Observaciones COR:"
boolean focusrectangle = false
end type

type st_12 from statictext within w_consulta_incidencia
integer x = 14
integer y = 1456
integer width = 379
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
boolean enabled = false
string text = "Prioridad:"
boolean focusrectangle = false
end type

type st_9 from statictext within w_consulta_incidencia
integer x = 4215
integer y = 1748
integer width = 1824
integer height = 64
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Instalaciones afectadas"
boolean focusrectangle = false
end type

type dw_informacion_aviso from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 70
string title = "none"
string dataobject = "dw_informacion_aviso"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type st_26 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 1364
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Elemento Operado"
boolean focusrectangle = false
end type

type st_5 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 756
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Sub-Causa    "
boolean focusrectangle = false
end type

type sle_nro_incidencia from singlelineedit within w_consulta_incidencia
integer x = 2871
integer y = 384
integer width = 549
integer height = 76
integer taborder = 110
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type mle_observaciones_cor from multilineedit within w_consulta_incidencia
integer x = 14
integer y = 2080
integer width = 2075
integer height = 208
integer taborder = 140
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
textcase textcase = upper!
boolean displayonly = true
end type

event getfocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_observacion
//Evento: getfocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se Activa el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

openwithparm(w_observaciones,this.text)
This.VScrollBar = true
end event

event losefocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_observacion
//Evento: losefocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se desactiva el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


This.VScrollBar = false
end event

type mle_observaciones_tel from multilineedit within w_consulta_incidencia
event click pbm_bnclicked
integer x = 14
integer y = 1804
integer width = 2075
integer height = 208
integer taborder = 50
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
textcase textcase = upper!
boolean displayonly = true
end type

event getfocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_observacion
//Evento: getfocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se Activa el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

openwithparm(w_observaciones,this.text)
This.VScrollBar = true
end event

event losefocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_observacion
//Evento: losefocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se desactiva el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


This.VScrollBar = false
end event

type st_25 from statictext within w_consulta_incidencia
integer x = 14
integer y = 1744
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 15793151
long backcolor = 128
boolean enabled = false
string text = "Observaciones  Telegestiones:"
boolean focusrectangle = false
end type

type sle_duracion_avi from singlelineedit within w_consulta_incidencia
integer x = 402
integer y = 1660
integer width = 567
integer height = 76
integer taborder = 150
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type st_24 from statictext within w_consulta_incidencia
integer x = 402
integer y = 1600
integer width = 1691
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
boolean enabled = false
string text = "Duraci$$HEX1$$f300$$ENDHEX$$n:                 |Coordenadas X:        |Coordenadas Y:"
boolean focusrectangle = false
end type

type sle_coordenadas_y from singlelineedit within w_consulta_incidencia
integer x = 1545
integer y = 1660
integer width = 549
integer height = 76
integer taborder = 150
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type sle_coordenadas_x from singlelineedit within w_consulta_incidencia
integer x = 974
integer y = 1660
integer width = 549
integer height = 76
integer taborder = 150
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type sle_resuelto_avi from singlelineedit within w_consulta_incidencia
integer x = 1253
integer y = 1516
integer width = 841
integer height = 76
integer taborder = 110
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type sle_deteccion_avi from singlelineedit within w_consulta_incidencia
boolean visible = false
integer x = 969
integer y = 1516
integer width = 562
integer height = 76
integer taborder = 130
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean enabled = false
boolean autohscroll = false
boolean displayonly = true
end type

type sle_ingresado_avi from singlelineedit within w_consulta_incidencia
integer x = 402
integer y = 1516
integer width = 841
integer height = 76
integer taborder = 100
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type st_23 from statictext within w_consulta_incidencia
integer x = 402
integer y = 1456
integer width = 1691
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
boolean enabled = false
string text = "Fecha Ingresado:                     |Fechas Resuelto:"
boolean focusrectangle = false
end type

type sle_previas_avi from singlelineedit within w_consulta_incidencia
integer x = 1687
integer y = 1340
integer width = 402
integer height = 76
integer taborder = 150
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type sle_improc_avi from singlelineedit within w_consulta_incidencia
integer x = 14
integer y = 1660
integer width = 379
integer height = 76
integer taborder = 140
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type sle_nro_aviso_avi from singlelineedit within w_consulta_incidencia
integer x = 1170
integer y = 1336
integer width = 448
integer height = 76
integer taborder = 150
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type sle_prioridad_avi from singlelineedit within w_consulta_incidencia
integer x = 14
integer y = 1516
integer width = 379
integer height = 76
integer taborder = 100
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type sle_tipo_avi from singlelineedit within w_consulta_incidencia
integer x = 1189
integer y = 1196
integer width = 901
integer height = 76
integer taborder = 150
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type sle_alcance_avi from singlelineedit within w_consulta_incidencia
integer x = 567
integer y = 1340
integer width = 549
integer height = 76
integer taborder = 90
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type st_22 from statictext within w_consulta_incidencia
integer x = 567
integer y = 1280
integer width = 1522
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
boolean enabled = false
string text = "Alcance                     |Nro Aviso              |Llam. Prev."
boolean focusrectangle = false
end type

type st_21 from statictext within w_consulta_incidencia
integer x = 567
integer y = 1136
integer width = 1522
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
boolean enabled = false
string text = "ESTADO:                    |TIPO:"
boolean focusrectangle = false
end type

type sle_estado_avi from singlelineedit within w_consulta_incidencia
integer x = 567
integer y = 1196
integer width = 599
integer height = 76
integer taborder = 120
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type dw_aviso_asociados from datawindow within w_consulta_incidencia
integer x = 4206
integer y = 704
integer width = 1824
integer height = 752
integer taborder = 110
string title = "none"
string dataobject = "dw_asoci_avisos"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

event clicked;GETFOCUS()
end event

event doubleclicked;
this.selectRow(0,false)
this.selectRow(row,true)

long l_avi

IF row <> 0 THEN
		l_avi = dw_aviso_asociados.Object.nro_aviso[row]
		OpenWithParm(w_aviso_asociado,l_avi)
END IF

end event

event getfocus;this.HScrollBar = true
this.VScrollBar = true
end event

event losefocus;this.HScrollBar = false
this.VScrollBar = false
end event

type cb_avi_aso from commandbutton within w_consulta_incidencia
integer x = 4759
integer y = 476
integer width = 750
integer height = 100
integer taborder = 120
boolean bringtotop = true
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
boolean enabled = false
string text = ">  Avisos Asociados"
end type

event clicked;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: cb_avi_aso
//Evento: clicked()
//DESCRIPCI$$HEX1$$d300$$ENDHEX$$N:  Se manda a llamar la ventana w_incidencias_avisos y se envia como parametro el numero de incidencia consultado
//EDM-14
//Creado:20/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

dw_aviso_asociados.SetTransobject(SQLCA)
dw_aviso_asociados.Retrieve(l_nro_incidencia)
end event

type rb_nro_aviso from radiobutton within w_consulta_incidencia
integer x = 311
integer y = 72
integer width = 498
integer height = 60
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long backcolor = 553648127
string text = "    Nro. Aviso"
end type

event clicked;IF l_search_aviso = false THEN
	sle_nis.text = ""
	MessageBox("Nro. Aviso","La busqueda se realizara mediante el Nro. Aviso")
	f_limpiar_variables()
	f_limpiar_controles()
	setFocus(sle_nis)
	l_search_nis = false
	l_search_aviso = true
END IF



end event

type rb_nis from radiobutton within w_consulta_incidencia
integer x = 14
integer y = 72
integer width = 261
integer height = 60
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long backcolor = 553648127
string text = "   NIS"
boolean checked = true
end type

event clicked;IF l_search_nis = false THEN
	sle_nis.text = ""
	MessageBox("NIS","La busqueda se realizara mediante el NIS")	
	f_limpiar_variables()
	f_limpiar_controles()
	setFocus(sle_nis)
	l_search_aviso = false
	l_search_nis = true
END IF

end event

type sle_tiempo_int from singlelineedit within w_consulta_incidencia
integer x = 5627
integer y = 1664
integer width = 411
integer height = 80
integer taborder = 130
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
end type

type st_14 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 1940
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Area Afectada"
boolean focusrectangle = false
end type

type em_final_solicitado from editmask within w_consulta_incidencia
integer x = 4923
integer y = 1664
integer width = 699
integer height = 80
integer taborder = 110
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = datetimemask!
string mask = "[date][time]"
end type

type em_inicio_solicitado from editmask within w_consulta_incidencia
integer x = 4215
integer y = 1664
integer width = 699
integer height = 80
integer taborder = 130
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = datetimemask!
string mask = "[date][time]"
end type

type mle_insta_afec from multilineedit within w_consulta_incidencia
integer x = 4215
integer y = 1804
integer width = 1824
integer height = 300
integer taborder = 40
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
textcase textcase = upper!
boolean displayonly = true
end type

event getfocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_observacion
//Evento: getfocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se Activa el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


This.VScrollBar = true
end event

event losefocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_observacion
//Evento: losefocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se desactiva el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


This.VScrollBar = false
end event

type mle_area_afec from multilineedit within w_consulta_incidencia
integer x = 2107
integer y = 2000
integer width = 2075
integer height = 200
integer taborder = 50
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
textcase textcase = upper!
boolean displayonly = true
end type

event getfocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_area_afec
//Evento: getfocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se Activa el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

This.VScrollBar = true
end event

event losefocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_area_afec
//Evento: loseFocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se desactiva el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

This.VScrollBar = false
end event

type st_16 from statictext within w_consulta_incidencia
integer x = 4215
integer y = 1604
integer width = 1824
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Inicio Solicitado                 |Final Solicitado                |Tiempo Interrup"
boolean focusrectangle = false
end type

type st_15 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 1796
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Tension Origen                                    |Tension Afectada"
boolean focusrectangle = false
end type

type sle_agente from singlelineedit within w_consulta_incidencia
integer x = 3186
integer y = 1712
integer width = 997
integer height = 76
integer taborder = 120
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
end type

type sle_tension_afectada from singlelineedit within w_consulta_incidencia
integer x = 3154
integer y = 1856
integer width = 1029
integer height = 76
integer taborder = 120
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type sle_tension_origen from singlelineedit within w_consulta_incidencia
integer x = 2107
integer y = 1856
integer width = 1029
integer height = 76
integer taborder = 30
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
end type

type mle_observacion from multilineedit within w_consulta_incidencia
integer x = 2107
integer y = 2268
integer width = 2075
integer height = 200
integer taborder = 140
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
textcase textcase = upper!
boolean displayonly = true
end type

event getfocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_observacion
//Evento: getfocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se Activa el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

openwithparm(w_observaciones,this.text)
This.VScrollBar = true
end event

event losefocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_observacion
//Evento: losefocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se desactiva el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


This.VScrollBar = false
end event

type st_11 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 2208
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Observaciones"
boolean focusrectangle = false
end type

type sle_tipo_incidencia from singlelineedit within w_consulta_incidencia
integer x = 2107
integer y = 1712
integer width = 1074
integer height = 76
integer taborder = 100
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type st_10 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 1652
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Tipo de Incidencia                                 |Agente"
boolean focusrectangle = false
end type

type st_8 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 1508
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Elemento Fallado"
boolean focusrectangle = false
end type

type st_6 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 612
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Causa                                                                "
boolean focusrectangle = false
end type

type st_4 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 896
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Descripcion"
boolean focusrectangle = false
end type

type st_3 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 468
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Orden de trabajo               |Fecha de Causa                 |Tensi$$HEX1$$f300$$ENDHEX$$n"
boolean focusrectangle = false
end type

type sle_estado_incidencia from singlelineedit within w_consulta_incidencia
integer x = 3424
integer y = 384
integer width = 759
integer height = 76
integer taborder = 100
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type sle_efa from singlelineedit within w_consulta_incidencia
integer x = 2107
integer y = 1568
integer width = 2075
integer height = 76
integer taborder = 90
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type sle_eop from singlelineedit within w_consulta_incidencia
integer x = 2107
integer y = 1424
integer width = 2075
integer height = 76
integer taborder = 80
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type sle_sub_causa from singlelineedit within w_consulta_incidencia
integer x = 2107
integer y = 816
integer width = 2075
integer height = 76
integer taborder = 70
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type sle_causa from singlelineedit within w_consulta_incidencia
integer x = 2107
integer y = 672
integer width = 2075
integer height = 76
integer taborder = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type sle_ot from singlelineedit within w_consulta_incidencia
integer x = 2107
integer y = 528
integer width = 699
integer height = 80
integer taborder = 50
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type mle_descripcion_incidencia from multilineedit within w_consulta_incidencia
integer x = 2107
integer y = 956
integer width = 2075
integer height = 252
integer taborder = 40
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
textcase textcase = upper!
boolean displayonly = true
end type

event getfocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_descripcion_incidencia
//Evento: getfocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se Activa el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


This.VScrollBar = true
end event

event losefocus;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: mle_descripcion_incidencia
//Evento: losefocus()
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se desactiva el scroll vertical
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

This.VScrollBar = false
end event

type sle_tension from singlelineedit within w_consulta_incidencia
integer x = 3584
integer y = 528
integer width = 599
integer height = 80
integer taborder = 110
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type st_2 from statictext within w_consulta_incidencia
integer x = 2107
integer y = 324
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "Nombre Incidencia               | Nro Incidencia:       |Estado Incidencia"
boolean focusrectangle = false
end type

type sle_nombre_incidencia from singlelineedit within w_consulta_incidencia
integer x = 2107
integer y = 384
integer width = 750
integer height = 76
integer taborder = 100
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type sle_documento from singlelineedit within w_consulta_incidencia
integer x = 14
integer y = 904
integer width = 599
integer height = 76
integer taborder = 80
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type st_1 from statictext within w_consulta_incidencia
integer x = 14
integer y = 844
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
string text = "|Documento                |Tel$$HEX1$$e900$$ENDHEX$$fono Celular          |Fecha de Detecci$$HEX1$$f300$$ENDHEX$$n"
boolean focusrectangle = false
end type

type sle_zona from singlelineedit within w_consulta_incidencia
integer x = 1838
integer y = 764
integer width = 251
integer height = 76
integer taborder = 80
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type sle_local from singlelineedit within w_consulta_incidencia
integer x = 1230
integer y = 764
integer width = 599
integer height = 76
integer taborder = 70
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type sle_muni from singlelineedit within w_consulta_incidencia
integer x = 622
integer y = 764
integer width = 599
integer height = 76
integer taborder = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type sle_depto from singlelineedit within w_consulta_incidencia
integer x = 14
integer y = 764
integer width = 599
integer height = 76
integer taborder = 50
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type st_7 from statictext within w_consulta_incidencia
integer x = 14
integer y = 704
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
boolean enabled = false
string text = "Departamento             |Municipio                  |Localidad                   |Zona"
boolean focusrectangle = false
end type

type mle_direccion from multilineedit within w_consulta_incidencia
integer x = 14
integer y = 484
integer width = 2075
integer height = 76
integer taborder = 40
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
textcase textcase = upper!
boolean displayonly = true
end type

event getfocus;this.VScrollBar = true
end event

event losefocus;this.VScrollBar = false
end event

type st_3x from statictext within w_consulta_incidencia
integer x = 14
integer y = 424
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
boolean enabled = false
string text = "Direcci$$HEX1$$f300$$ENDHEX$$n:"
boolean focusrectangle = false
end type

type st_cliente from statictext within w_consulta_incidencia
integer x = 14
integer y = 284
integer width = 2075
integer height = 60
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 15793151
long backcolor = 128
boolean enabled = false
string text = "Nombre del Cliente:                                                                     |NIS RAD:"
boolean focusrectangle = false
end type

type sle_cliente from singlelineedit within w_consulta_incidencia
integer x = 14
integer y = 344
integer width = 1783
integer height = 76
integer taborder = 20
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
textcase textcase = upper!
boolean displayonly = true
end type

type cb_consultar from commandbutton within w_consulta_incidencia
integer x = 1577
integer y = 64
integer width = 448
integer height = 100
integer taborder = 40
integer textsize = -10
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
string text = "Consultar"
end type

event clicked;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Nombre: w_consulta_incidencia
//DESCRIBCI$$HEX1$$d300$$ENDHEX$$N:  Se llama ala funcion f_retrieve la cual se encarga de traer toda la informaci$$HEX1$$f300$$ENDHEX$$n sobre el NIS, INCIDENCIA  y DESCARGO
//EDM-14
//Creado:27/02/2018
//TDA-RODOLFO GUTI$$HEX1$$c900$$ENDHEX$$RREZ
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

openwithparm(w_msg,"Cargando...")

if len(sle_nis.Text) = 0 then
		
		messageBox("Error","Campo Vaci$$HEX2$$f3002000$$ENDHEX$$")
		close(w_msg)
		return 0
	elseif len(sle_nis.Text) < 7 then
		
		IF l_search_nis THEN
			messageBox("Error","Utilice un numero de suministro v$$HEX1$$e100$$ENDHEX$$lido")	
		end if
		
		if l_search_aviso then
			messageBox("Error","Utilice un numero de aviso v$$HEX1$$e100$$ENDHEX$$lido ")
		end if
		
		close(w_msg)		
		return 0
	end if

f_limpiar_variables()
cb_avi_aso.ENABLED = false

IF l_search_aviso THEN 
	
	f_limpiar_controles()
	sle_nis.enabled = false
	cb_consultar.enabled = false
	f_retrieve_aviso(double(sle_nis.text))
	sle_nis.enabled = true
	cb_consultar.enabled = true
	
//	if not isNull(l_nro_incidencia) or l_nro_incidencia <> 0 then
//		
//		cb_avi_aso.ENABLED = true
//	end if
END IF

IF l_search_nis THEN
	
	f_limpiar_controles()
	sle_nis.enabled = false
	cb_consultar.enabled = false
	f_retrieve_nis(double(sle_nis.text))
	sle_nis.enabled = true
	cb_consultar.enabled = true
	
//	if not isNull(l_nro_incidencia) or l_nro_incidencia <> 0 then
//		
//		cb_avi_aso.ENABLED = true
//	end if
END IF

close(w_msg)
end event

type sle_nis from editmask within w_consulta_incidencia
event click_enter pbm_keydown
integer x = 960
integer y = 68
integer width = 498
integer height = 84
integer taborder = 30
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 8388608
alignment alignment = center!
textcase textcase = lower!
borderstyle borderstyle = stylelowered!
string mask = "#######"
end type

event click_enter;IF KeyDown(KeyEnter!) then
	openwithparm(w_msg,"Cargando...")

	if len(this.Text) = 0 then
		messageBox("Error","Campo Vaci$$HEX2$$f3002000$$ENDHEX$$")
		close(w_msg)
		return 0
	elseif len(this.Text) < 7 then
		
		IF l_search_nis THEN
			messageBox("Error","Utilice un numero de suministro v$$HEX1$$e100$$ENDHEX$$lido")	
		end if
		
		if l_search_aviso then
			messageBox("Error","Utilice un numero de aviso v$$HEX1$$e100$$ENDHEX$$lido ")
		end if
		
		close(w_msg)		
		return 0
	end if
		
	f_limpiar_variables()
	cb_avi_aso.ENABLED = false
	
	IF l_search_aviso THEN 
		
		f_limpiar_controles()
		f_retrieve_aviso(double(sle_nis.text))
		
//		if not isNull(l_nro_incidencia) or l_nro_incidencia <> 0 then
//			
//			cb_avi_aso.ENABLED = true
//		end if
	END IF
	
	IF l_search_nis THEN
		
		f_limpiar_controles()
		f_retrieve_nis(double(sle_nis.text))
		
//		if not isNull(l_nro_incidencia) or l_nro_incidencia <> 0 then
//			
//			cb_avi_aso.ENABLED = true
//		end if
	END IF
	
	close(w_msg)
end if
end event

type em_fecha_deteccion from editmask within w_consulta_incidencia
integer x = 2816
integer y = 528
integer width = 759
integer height = 80
integer taborder = 130
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
maskdatatype maskdatatype = datetimemask!
string mask = "[date][time]"
end type

type sle_accion_causante from singlelineedit within w_consulta_incidencia
integer x = 2107
integer y = 1280
integer width = 2075
integer height = 76
integer taborder = 120
boolean bringtotop = true
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean displayonly = true
borderstyle borderstyle = stylelowered!
end type

type gb_2 from groupbox within w_consulta_incidencia
integer x = 2098
integer y = 224
integer width = 2098
integer height = 2272
integer taborder = 90
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16711680
long backcolor = 67108864
string text = "INFORMACI$$HEX1$$d300$$ENDHEX$$N DE INCIDENCIA"
end type

type dw_consulta_incidencia from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 110
string title = "none"
string dataobject = "dw_inf_inc"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type gb_3 from groupbox within w_consulta_incidencia
integer y = 224
integer width = 2098
integer height = 772
integer taborder = 20
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16711680
long backcolor = 67108864
string text = "INFORMACI$$HEX1$$d300$$ENDHEX$$N SUMINISTRO"
end type

type dw_inf_causa from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 90
string title = "none"
string dataobject = "dw_inc_causa"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type dw_inf_sub_causa from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 50
string title = "none"
string dataobject = "dw_inc_sub_causa"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type dw_inf_elem_fallado from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 40
string title = "none"
string dataobject = "dw_elemento_fallado"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type dw_inf_elem_operado from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 100
string title = "none"
string dataobject = "dw_elemeto_operado"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type dw_tension from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 120
string title = "none"
string dataobject = "dw_inc_tension"
boolean livescroll = true
end type

type dw_informacion_nis from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 30
string title = "none"
string dataobject = "dw_inf_nis"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type gb_5 from groupbox within w_consulta_incidencia
integer x = 4206
integer y = 1528
integer width = 1847
integer height = 972
integer taborder = 80
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16711680
long backcolor = 67108864
string text = "INFORMACI$$HEX1$$d300$$ENDHEX$$N DEL DESCARGO"
end type

type dw_descargos from datawindow within w_consulta_incidencia
integer width = 5
integer height = 4
integer taborder = 150
string title = "none"
string dataobject = "dw_descargos_consul"
boolean livescroll = true
borderstyle borderstyle = stylelowered!
end type

type gb_avisos_asociados from groupbox within w_consulta_incidencia
integer x = 4192
integer y = 408
integer width = 1851
integer height = 200
integer taborder = 100
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16711680
long backcolor = 67108864
string text = "OPCIONES DE CONSULTAS"
end type

type gb_aso_inc from groupbox within w_consulta_incidencia
integer x = 4192
integer y = 632
integer width = 1851
integer height = 880
integer taborder = 80
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16711680
long backcolor = 67108864
string text = "AVISOS ASOCIADOS A LA INCIDENCIA"
end type

type gb_4 from groupbox within w_consulta_incidencia
integer y = 1024
integer width = 2098
integer height = 1472
integer taborder = 120
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16711680
long backcolor = 67108864
string text = "INFORMACI$$HEX1$$d300$$ENDHEX$$N DE AVISO"
end type

type gb_1 from groupbox within w_consulta_incidencia
integer width = 2098
integer height = 200
integer taborder = 10
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16711680
long backcolor = 67108864
string text = "CONSULTA POR NIS O NRO. AVISO"
end type

type st_18 from statictext within w_consulta_incidencia
integer x = 27
integer y = 1136
integer width = 498
integer height = 60
boolean bringtotop = true
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
boolean enabled = false
string text = "ZONA:"
boolean focusrectangle = false
end type

type sle_zona_avi from singlelineedit within w_consulta_incidencia
integer x = 27
integer y = 1196
integer width = 498
integer height = 76
integer taborder = 90
boolean bringtotop = true
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type st_20 from statictext within w_consulta_incidencia
integer x = 27
integer y = 1280
integer width = 498
integer height = 60
boolean bringtotop = true
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16777215
long backcolor = 128
boolean enabled = false
string text = "SECTOR:"
boolean focusrectangle = false
end type

type sle_sector_avi from singlelineedit within w_consulta_incidencia
integer x = 27
integer y = 1340
integer width = 498
integer height = 76
integer taborder = 140
boolean bringtotop = true
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 553648127
boolean autohscroll = false
boolean displayonly = true
end type

type gb_7 from groupbox within w_consulta_incidencia
integer x = 2094
integer width = 2098
integer height = 200
integer taborder = 40
integer textsize = -10
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16711680
long backcolor = 67108864
string text = "ALARMAS"
end type

type gb_9 from groupbox within w_consulta_incidencia
integer x = 2885
integer width = 9
integer height = 200
integer taborder = 50
integer textsize = -11
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long backcolor = 67108864
string text = "none"
end type

type gb_11 from groupbox within w_consulta_incidencia
boolean visible = false
integer x = 4274
integer y = 24
integer width = 1774
integer height = 308
integer taborder = 40
integer textsize = -11
integer weight = 400
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 16711680
long backcolor = 67108864
string text = "Gesti$$HEX1$$f300$$ENDHEX$$n"
end type

